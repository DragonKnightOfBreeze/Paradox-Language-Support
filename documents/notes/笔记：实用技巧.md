# 笔记：实用技巧

## PowerShell 命令

建立指向共享的 AI 规则目录（`documents/ai-rules`）的目录联结：

```powershell
$ErrorActionPreference = 'Stop'
$ts = Get-Date -Format 'yyyyMMdd_HHmmss'

# 1. Backup existing .windsurf\rules (rename only the leaf name)
if (Test-Path '.windsurf\rules') {
  Rename-Item -Path '.windsurf\rules' -NewName ("rules.bak_{0}" -f $ts)
}

# 2. Backup existing .clinerules (rename only the leaf name)
if (Test-Path '.clinerules') {
  Rename-Item -Path '.clinerules' -NewName (".clinerules.bak_{0}" -f $ts)
}

# 3. Validate target exists
if (-not (Test-Path 'documents\ai-rules')) { throw "Target 'documents\\ai-rules' does not exist." }
# 4) Create junctions
New-Item -ItemType Junction -Path '.windsurf\rules' -Target 'documents\ai-rules' | Out-Null # windsurf
New-Item -ItemType Junction -Path '.clinerules' -Target 'documents\ai-rules' | Out-Null # cline
Write-Host 'Junctions created'
```

备注：似乎 windsurf 的规则文件必须不能被 `gitignore` 忽略，并且也不能使用目录联结，否则重启项目后可能会出现问题，导致无法被识别…… 

## 正则

规范化注释：

```
(^\s*//)(\S)
$1 $2
```

```
(\s+//)(\S)
$1 $2
```

将 `key = {...}` 替换为 `key`：

```
^\s*(\w+)\s+=\s*\{([\s\S]*?\n\}|[ ]*\})
$1
```