import{_ as s,a as e}from"./parameters_1-E5MDCLKe.js";import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as l,o as t}from"./app-BPxSOn7f.js";const o={};function r(d,i){return t(),a("div",null,[...i[0]||(i[0]=[l(`<h1 id="appendix-config-format-reference" tabindex="-1"><a class="header-anchor" href="#appendix-config-format-reference"><span>Appendix: Config Format Reference</span></a></h1><h2 id="vision" tabindex="-1"><a class="header-anchor" href="#vision"><span>Positioning &amp; Vision</span></a></h2><p>This reference targets authors and maintainers who want to &quot;understand / write / extend&quot; CWT configs (CWT config files), and aims to:</p><ul><li><strong>Unify terminology and boundaries</strong>: align semantics between PLS and CWTools, and clarify PLS extension points and differences.</li><li><strong>Build a mapping from documentation to implementation</strong>: each config item is annotated with the corresponding interfaces/resolvers so you can trace the source code and verify behavior.</li><li><strong>Guide to practice</strong>: outline purpose, format, and notes, laying the groundwork for refined examples and validation rules.</li></ul><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h2><p>PLS reads <code>.cwt</code> files, builds &quot;config groups&quot;, and parses configs into structured &quot;config objects&quot; used by language features (highlighting, completion, navigation, inspections, documentation, etc.).</p><ul><li><strong>Config sources and overriding</strong>: see &quot;Config Groups/Override Strategy&quot; in <code>docs/en/config.md</code>. Common sources include built-in, remote, local, and project-local. Later ones override earlier ones by &quot;path + config ID&quot;.</li><li><strong>Two pillars</strong>: <ul><li>Configs: define allowed shapes and contexts for keys/values/blocks (e.g., types, enums, aliases, links ...).</li><li>Config expressions: describe the syntax used in string fields of configs for value/matching (e.g., <code>&lt;type&gt;</code>, <code>enum[...]</code>, <code>value[...]</code>, cardinality/template/location expressions).</li></ul></li><li><strong>Parsing flow (simplified)</strong>: <ol><li>Read config groups and build PSI for config files.</li><li>Use resolvers (by interface category) to build delegated/internal config objects.</li><li>Language features query and apply these configs by context (scope, type name, declaration context, etc.).</li></ol></li></ul><p>Terminology:</p><ul><li>&quot;Config(s)&quot; include base configs, normal configs, extended configs, and internal configs.</li><li>&quot;Base configs&quot; (e.g., <code>CwtPropertyConfig</code>) are generic syntax-tree-level nodes and are not described one by one here.</li></ul><h2 id="configs" tabindex="-1"><a class="header-anchor" href="#configs"><span>Configs</span></a></h2><blockquote><p>This chapter introduces the purpose, key format points, and parsing notes for various configs to help you understand and write these special structures correctly.</p></blockquote><h3 id="configs-normal" tabindex="-1"><a class="header-anchor" href="#configs-normal"><span>Normal Configs</span></a></h3><blockquote><p>These configs drive various language features, including but not limited to code completion, code inspection, quick documentation, inlay hints, etc.</p></blockquote><h4 id="config-priority" tabindex="-1"><a class="header-anchor" href="#config-priority"><span>Priority Configs</span></a></h4><p>Priority configs are used to configure how targets are overridden.</p><ul><li><strong>Purpose</strong>: provide a unified strategy for overriding/merging of &quot;targets&quot;, affecting the order of effect and the sort order of non-stream queries.</li><li><strong>Applicable targets</strong>: files, global scripted variables, definitions, localisations, etc.</li><li><strong>Default value</strong>: when no directory mapping matches, <code>LIOS</code> (last-in wins) is used.</li></ul><p><strong>Override strategies and behavior</strong>:</p><ul><li><code>FIOS</code> (First In, Only Served): Read only once. The first-loaded one takes effect, and subsequent ones will be just ignored.</li><li><code>LIOS</code> (Last In, Only Served): Later reads override. The last loaded overrides the first loaded.</li><li><code>DUPL</code> (Duplicates): Whole-file override. Must be overridden entirely by a file with the same path.</li><li><code>ORDERED</code> (Ordered): Sequential reading. Existing ones cannot be overwritten, and later loaded ones will be sequentially added or merged.</li></ul><p><strong>Sorting and loading notes</strong>:</p><ul><li>Sort order of non-stream query results is driven by priority; under the same path, load order (game/dependency chain) determines the precedence.</li><li>Within the same file, later items override earlier ones.</li><li>See <code>ParadoxPriorityProvider.getComparator()</code> for the implementation and defaults.</li></ul><p><strong>Format notes</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priorities</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # LHS - file path of containing directory, relative to entry directory</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # RHS - used override strategy</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # entry directory - normally game or mod directory, or \`game\` subdirectory of game directory</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # override strategy - available values: \`fios\`, \`lios\`, \`dupl\`, \`ordered\`; default: \`lios\`; ignore case</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;events&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fios</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Examples</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priorities</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;common/event_chains&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fios</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;common/on_actions&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ordered</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;common/scripted_variables&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fios</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;events&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fios</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Two mods both define an event with the same name under <code>events/</code>: because <code>events = fios</code>, the mod read earlier (loaded earlier) takes effect and the later one is ignored.</li><li>Two mods both add entries under <code>common/on_actions/</code>: because <code>ordered</code>, they will be merged in order without overriding.</li></ul><h4 id="config-declaration" tabindex="-1"><a class="header-anchor" href="#config-declaration"><span>Declaration Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: declare the structure of a &quot;definition entry&quot; for completion, inspections, quick documentation, etc.</p></li><li><p><strong>Path location</strong>: <code>{name}</code>, where <code>{name}</code> is the config name (i.e., the &quot;definition type&quot;). A top-level property whose key is a valid identifier and is not matched by other configs falls back to being parsed as a declaration config.</p></li><li><p><strong>Dependent context</strong>: <code>CwtDeclarationConfigContextProvider</code> constructs the declaration context (definition name, type, subtype). Game Rule/On Action can rewrite the context via extended configs.</p></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ol><li>Parse the name: skip if the key is not a valid identifier (<code>CwtDeclarationConfigResolverImpl</code>).</li><li>Root-level inlining: if RHS is <code>single_alias_right[...]</code>, expand it into normal property configs first (<code>CwtConfigManipulator.inlineSingleAlias</code>).</li><li>Build the final config tree: <ul><li>Deep-copy and trim/flatten by subtype (<code>deepCopyConfigsInDeclarationConfig</code>).</li><li>If a <code>subtype[...]</code> matches the context subtype: flatten its children; if not, skip; non-<code>subtype[...]</code> nodes recurse normally.</li><li>Inject derived configs (<code>CwtInjectedConfigProvider.injectConfigs</code>) and uniformly set <code>parentConfig</code> to keep the parent chain.</li></ul></li><li>Subtype cache key: scan <code>subtype[...]</code> to collect used subtype set (<code>subtypesUsedInDeclaration</code>), and combine it with the current context to build the cache key, avoiding cache invalidation by irrelevant subtypes.</li></ol></li><li><p><strong>Cooperation with other configs</strong>:</p><ul><li>Can reference aliases and single-aliases inside a declaration (<code>alias_name[...]</code>/<code>alias_match_left[...]</code>, <code>single_alias_right[...]</code>).</li><li>Swapped-type declarations can be nested directly under the base type declaration.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">event</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scalar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # Refine the structure by subtype; only takes effect under the matching subtype</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    subtype[triggered]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        weight_multiplier</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            factor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> float</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            alias_name[modifier_rule]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> alias_match_left[modifier_rule]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # The root-level single alias will be inlined before parsing</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    trigger</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li><code>subtype[...]</code> only takes effect when it matches the context subtype; otherwise it is ignored (no errors).</li><li>Root-level <code>single_alias_right[...]</code> is expanded first and then participates in subsequent parsing and inspections.</li><li>To ensure upward tracing in later features, all newly added nodes will have <code>parentConfig</code> (parent pointer) injected.</li></ul><h4 id="config-system-scope" tabindex="-1"><a class="header-anchor" href="#config-system-scope"><span>System Scope Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide metadata for built-in &quot;system-level scopes&quot; (This/Root/Prev/From, etc.) for quick documentation and scope stack derivation.</p></li><li><p><strong>Path location</strong>: <code>system_scopes/{id}</code>, where <code>{id}</code> is the system scope ID.</p></li><li><p><strong>Fields</strong>:</p><ul><li><code>id</code>: system scope ID.</li><li><code>base_id</code>: base scope ID; defaults to <code>id</code> if unspecified. Used to categorize scope families (e.g., <code>Prev*</code>, <code>From*</code>) for display and documentation.</li><li><code>: string</code>: human-readable name; defaults to <code>id</code> if unspecified.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Read <code>id = key</code>, <code>base_id = properties[&#39;base_id&#39;] ?: id</code>, and <code>name = stringValue ?: id</code> (<code>CwtSystemScopeConfigResolverImpl</code>).</li><li>Equality is compared by <code>id</code> (same <code>id</code> means the same system scope).</li></ul></li><li><p><strong>Cooperation with other configs</strong>:</p><ul><li>Works together with &quot;Scopes and Scope Groups&quot; to drive scope checks and hints.</li><li>Some extended configs may use the option <code>replace_scopes</code> to map system scopes to concrete scope types under the current context (e.g., map <code>this/root/from</code> to <code>country</code>).</li><li>Note: <code>replace_scopes</code> does not support replacing the <code>prev</code> series of system scopes (<code>prev/prevprev/...</code>); see &quot;How to specify scope context in config files&quot; in <code>docs/en/config.md</code>.</li></ul></li></ul><p><strong>Example (built-in)</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">system_scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    This</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    Root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    Prev</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">base_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Prev</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    From</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">base_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> From</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # Chain members like PrevPrev/FromFrom are omitted</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-directive" tabindex="-1"><a class="header-anchor" href="#config-directive"><span>Directive Configs</span></a></h4><p>Used to describe special expressions and structures in script files that are different from general abstractions, and provide additional metadata for hints and validation. These expressions and structures change the behavior of the script parser at game runtime, allowing you to modify, extend, or reuse existing script snippets. Different directives can have different config structures.</p><p>Language features currently involved:</p><ul><li><strong>Inline_script</strong>: (Sellaris) will be replaced by the content of the target file during the parsing phase, and arguments can be specified.</li><li><strong>definition_injection</strong>: (VIC3/EU5) will inject or replace The declaration of the target definition during the parsing phase, and the mode can be specified to determine the specific behavior.</li></ul><p><strong>Path location</strong>: <code>directive[{name}]</code>, where <code>{name}</code> is the config name.</p><p><strong>Example</strong>ï¼š</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">directive[inline_script]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-type" tabindex="-1"><a class="header-anchor" href="#config-type"><span>Type Configs and Subtype Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: locate and name &quot;definitions&quot; by file path/key, and optionally declare subtypes, presentation and images.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Type: <code>types/type[{type}]</code>, where <code>{type}</code> is the definition type name.</li><li>Subtype: <code>types/type[{type}]/subtype[{subtype}]</code>.</li></ul></li><li><p><strong>File matching and sources</strong>:</p><ul><li><code>path</code>/<code>path_file</code>/<code>path_extension</code>/<code>path_pattern</code>/<code>path_strict</code> together determine which files are scanned.</li><li>Paths are normalized by removing the <code>game/</code> prefix and unifying separators; <code>path_extension</code> should not include the dot (e.g., <code>.txt</code> -&gt; <code>txt</code>).</li><li><code>type_per_file</code> means &quot;one type instance per file&quot;.</li></ul></li><li><p><strong>Definition key constraints</strong>:</p><ul><li><code>type_key_prefix</code> specifies the key prefix; and it provides a corresponding raw-value config (<code>typeKeyPrefixConfig</code>) for rendering and hints.</li><li><code>type_key_filter</code>/<code>type_key_regex</code>/<code>starts_with</code> constrain the allowed &quot;definition key&quot; values; <code>skip_root_key</code> allows skipping some top-level keys to continue matching (case-insensitive, supports multiple groups).</li><li><code>possibleTypeKeys</code> is computed from type/subtype filters to support completion and validation.</li></ul></li><li><p><strong>Naming and uniqueness</strong>:</p><ul><li><code>name_field</code> specifies the source field for display name; <code>name_from_file</code> means derive the name from the filename; <code>unique</code> is used for conflict checks/navigation hints; <code>severity</code> marks the display severity level.</li></ul></li><li><p><strong>Subtypes</strong>:</p><ul><li>Options: <code>type_key_filter</code>, <code>type_key_regex</code>, <code>starts_with</code>, <code>only_if_not</code>, <code>group</code>.</li><li>Matching is trimmed in declaration order; usually used together with <code>subtype[...]</code> in declaration configs to refine structure and checks.</li></ul></li><li><p><strong>Presentation</strong>:</p><ul><li><code>localisation</code>/<code>images</code> subsections configure display texts and images for a type.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ol><li>Parse <code>type[...]</code> name and required properties; if required fields are missing, skip this type (<code>CwtTypeConfigResolverImpl</code>).</li><li>Collect file sources and key constraints, build subtype mapping, and parse presentation settings.</li><li>Merge <code>modifiers</code>: if <code>modifiers</code> is declared inside a type config, derive modifier configs and write them into <code>configGroup.modifiers</code> and <code>type2ModifiersMap</code> (grouped by <code>type</code> or <code>type.subtype</code>).</li><li>Compute <code>possibleTypeKeys</code>, and bind a tag type (<code>CwtTagType.TypeKeyPrefix</code>) to <code>type_key_prefix</code> when needed.</li></ol></li><li><p><strong>Cooperation with other configs</strong>:</p><ul><li>Works with <code>Declaration</code> to provide context and structural constraints for concrete definitions.</li><li>Works with <code>Modifier/Modifier Category</code>, deriving type-related modifier configs via <code>modifiers</code>.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    type[civic_or_origin]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # File sources</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;game/common/governments/civics&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # the prefix \`game/\` will be removed automatically</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        path_extension</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Key constraints and prefix</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        type_key_prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> civic_</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## type_key_filter = { +civic_ -origin_ }  # include/exclude sets</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## starts_with = civic_</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## skip_root_key = { potential }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Subtype</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        subtype[origin]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            ## type_key_filter = +origin_</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            ## group = lifecycle</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Presentation</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        localisation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name_field</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        images</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">main</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> icon</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Missing any required property will cause the type to be skipped (a log entry will be emitted).</li><li><code>path</code> and <code>path_pattern</code> can be used together; <code>path_strict</code> enforces strict matching.</li><li><code>skip_root_key</code> is a multi-group setting: if any group matches the sequence of top-level keys in the file, the matcher can skip them and continue to match the definition key.</li><li>Subtype matching is order-sensitive; place more specific configs earlier.</li></ul><h4 id="config-alias" tabindex="-1"><a class="header-anchor" href="#config-alias"><span>Alias Configs and Single Alias Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: abstract reusable config snippets as named aliases that can be referenced and expanded in multiple places; a single-alias is for one-to-one reuse on the value side.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Alias: <code>alias[{name}:{subName}]</code> (<code>{subName}</code> is a constrained data expression).</li><li>Single alias: <code>single_alias[{name}]</code>.</li></ul></li><li><p><strong>Syntax and reference</strong>:</p><ul><li>Declare an alias: <code>alias[effect:some_effect] = { ... }</code></li><li>Use an alias: write <code>alias_name[effect] = alias_match_left[effect]</code> at the use site</li><li>Declare a single alias: <code>single_alias[trigger_clause] = { alias_name[trigger] = alias_match_left[trigger] }</code></li><li>Use a single alias: <code>potential = single_alias_right[trigger_clause]</code></li></ul></li><li><p><strong>Option semantics (alias)</strong>:</p><ul><li><code>scope/scopes</code>: allowed input scope set (<code>supportedScopes</code>).</li><li><code>push_scope</code>: output scope (<code>outputScope</code>).</li><li><code>subName</code> supports a constrained data expression and is parsed as <code>subNameExpression</code>; it also serves as <code>configExpression</code> for matching and hints.</li></ul></li><li><p><strong>Parsing and inlining (implementation summary)</strong>:</p><ul><li>Parse <code>name</code>/<code>subName</code> from the key (<code>CwtAliasConfigResolverImpl</code>).</li><li>Expand at use site: <code>CwtConfigManipulator.inlineAlias</code> copies the alias body as normal property configs: <ul><li>After expansion the key equals subName (<code>key = subName</code>), and the value/children are deep-copied while keeping options.</li><li>If the expanded RHS is <code>single_alias_right[...]</code>, it will continue to inline the single-alias (cascading expansion).</li><li>After expansion, the result participates in injection (<code>CwtInjectedConfigProvider.injectConfigs</code>) and parent pointer backfill, then enters regular validation/completion flows.</li></ul></li><li>Single alias expands on the value side: <code>CwtConfigManipulator.inlineSingleAlias</code> replaces the entire declaration into the value and child block at the use site.</li></ul></li><li><p><strong>Cooperation with other configs</strong>:</p><ul><li>Often used with &quot;Declaration&quot; to reuse trigger/effect snippets inside definition declarations.</li><li>Works with &quot;Types and Subtypes&quot; as part of modifier configs or context constraints.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Alias: define an effect snippet</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">alias[effect:apply_bonus]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    add_modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enum[modifier_rule]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        days</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> int</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Use alias in scripts</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scripted_effect</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    alias_name[effect]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> alias_match_left[effect]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Single alias: define a trigger-block snippet</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">single_alias[trigger_clause]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    alias_name[trigger]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> alias_match_left[trigger]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Use single-alias on value side in a declaration</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">some_definition</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    potential</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>The unique key of an alias is <code>name:subName</code>; duplicates are processed by the overriding strategy/priority.</li><li>Cardinality and option checks happen after expansion; consider the final semantics at the use site rather than the declaration.</li><li><code>subName</code> is a constrained data expression; you can use templates/enums to increase reuse, but avoid being too broad and causing mismatches.</li></ul><h4 id="config-enum" tabindex="-1"><a class="header-anchor" href="#config-enum"><span>Enum Configs and Complex Enum Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide value sets for the data expression <code>enum[...]</code>.</p><ul><li>Simple enum: a fixed set of values, all declared in config files.</li><li>Complex enum: dynamically collect enum values from script files by path/anchors.</li></ul></li><li><p><strong>Path location</strong>:</p><ul><li>Simple: <code>enums/enum[{name}]</code></li><li>Complex: <code>enums/complex_enum[{name}]</code></li></ul></li></ul><hr><p><strong>Simple Enum</strong>:</p><p>Fields and implementation:</p><ul><li><code>name</code>: enum name.</li><li><code>values</code>: candidate set (case-insensitive).</li><li><code>valueConfigMap</code>:</li><li>The current implementation supports constant values only; template expressions are not supported.</li></ul><p>Declaration:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enums</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    enum[weight_or_base]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">weight</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> base</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>Complex Enum</strong>:</p><p><strong>Matching Logic</strong>:</p><ul><li>The combination of <code>path</code>/<code>path_file</code>/<code>path_extension</code>/<code>path_pattern</code>/<code>path_strict</code> determines the set of files to be scanned.</li><li><code>path</code> and <code>path_extension</code> are normalized during resolving.</li><li><code>start_from_root</code>: Whether to start searching for anchors from the top of the file (rather than from top-level properties).</li><li><code>## case_insensitive</code>: (PLS extension) Whether to mark complex enum values as case-insensitive.</li><li><code>## per_definition</code>: (PLS extension) Whether to restrict the equivalence of complex enum values with the same name and type to the definition level, rather than the file level.</li><li><code>name</code> subsection: Describes how to locate value anchors within matching files; the implementation collects all properties or values named <code>enum_name</code> within it as anchors (<code>enumNameConfigs</code>).</li></ul><p><strong>Parsing flow (brief)</strong>:</p><ol><li>Simple: parse <code>enum[...]</code> and its value list; build a case-insensitive value set and mapping (<code>CwtEnumConfigResolverImpl</code>).</li><li>Complex: parse file sources and the <code>name</code> subsection and anchors; during indexing, collect actual values (<code>enum_name</code>) from matched files.</li><li>Both serve completion and validation of <code>enum[...]</code>.</li></ol><p>Declaration (example):</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enums</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    complex_enum[component_tag]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;game/common/component_tags&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        start_from_root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> yes</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            enum_name</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Simple enums currently support constant values only; if you write a template expression, it will not be parsed as a template.</li><li>A complex enum without a <code>name</code> subsection or without any <code>enum_name</code> anchors found in matched files will result in an empty enum.</li><li>Simple enum values are case-insensitive by default, and complex enum values are case-sensitive by default.</li></ul><h4 id="config-dynamic-value" tabindex="-1"><a class="header-anchor" href="#config-dynamic-value"><span>Dynamic Value Type Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide predefined (hard-coded) dynamic value sets for the data expression <code>value[...]</code>, as an alternative to fixed literals, for completion and validation.</p></li><li><p><strong>Path location</strong>: <code>values/value[{name}]</code>, where <code>{name}</code> is the dynamic value type name.</p></li><li><p><strong>Fields and limits</strong>:</p><ul><li><code>name</code>: dynamic value type name.</li><li><code>values</code>: value set (case-insensitive).</li><li><code>valueConfigMap</code>: mapping from value to its value config.</li><li>The current implementation supports constant values only; template expressions are not supported.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Parse the <code>value[...]</code> name and the value list, build a case-insensitive set and mapping (<code>CwtDynamicValueTypeConfigResolverImpl</code>).</li><li>Used by <code>value[...]</code> during completion and validation.</li></ul></li><li><p><strong>Relation to extended configs</strong>:</p><ul><li>If you need to declare scope context (e.g., only accepts a push scope) or generate values dynamically by context, refer to the extended config &quot;Dynamic Value (Extended)&quot;.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    value[event_target]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">owner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> capital</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># case-insensitive</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-link" tabindex="-1"><a class="header-anchor" href="#config-link"><span>Link Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide semantics and type (scope/value) constraints for &quot;field/function-like&quot; nodes in complex expressions, supporting chained access, completion, and inspections.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Regular links: <code>links/{name}</code></li><li>Localisation links: <code>localisation_links/{name}</code> (if not declared explicitly, static regular links are copied automatically)</li></ul></li><li><p><strong>Static vs Dynamic</strong>:</p><ul><li>Static link: no <code>data_source</code>, represents a fixed node name (e.g., <code>owner</code>).</li><li>Dynamic link: declares <code>data_source</code> and/or <code>prefix</code>/<code>from_*</code>, and can carry dynamic data (e.g., <code>modifier:x</code>, <code>relations(x)</code>, <code>var:x</code>).</li></ul></li><li><p><strong>Fields and semantics (implementation)</strong>:</p><ul><li><code>type</code>ï¼šlink type (<code>scope</code>/<code>value</code>/<code>both</code>, default to <code>scope</code>).</li><li><code>from_data</code>ï¼šwhether to read dynamic data from text data (format <code>prefix:data</code>).</li><li><code>from_argument</code>ï¼šwhether to read dynamic data from arguments (format <code>func(arg)</code>).</li><li><code>argument_separator</code>ï¼šthe argument separator to use when there are multiple arguments (<code>comma</code>/<code>pipe</code>, default to <code>comma</code>).</li><li><code>prefix</code>: prefix for dynamic links; when <code>from_argument = yes</code>, the parser removes a trailing colon to avoid <code>prefix:</code> duplication.</li><li><code>data_source</code> (multiple): each is a data expression that constrains legal values of dynamic data, supporting multi-argument scenarios.</li><li><code>input_scopes</code>: input scope set; both <code>input_scope</code> and <code>input_scopes</code> are accepted by the resolver.</li><li><code>output_scope</code>: output scope; empty means passthrough/derived from data source.</li><li><code>for_definition_type</code>: only available under the specified definition type.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Read fields and normalize: scope IDs are normalized via <code>ParadoxScopeManager.getScopeId()</code>.</li><li>Validation: when <code>from_data</code> or <code>from_argument</code> is <code>yes</code>, at least one <code>data_source</code> must exist.</li><li>Build data expressions: parse <code>CwtDataExpression</code> for each <code>data_source</code>, supporting multiple parameters (use <code>delegatedWith(index)</code> to specify the current parameter when needed).</li><li>Localisation links: can be copied from regular links (static) or parsed separately.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">links</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # Static scope link</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    owner</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        input_scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        output_scope</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> any</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # Dynamic value link (with prefix)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        from_data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> yes</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> modifier</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data_source</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dynamic_value[test_flag]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        input_scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # Dynamic scope link (function-like)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    relations</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        from_argument</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> yes</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data_source</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;country&gt;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">           # multiple data sources can be mixed</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data_source</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dynamic_value[test_flag]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        input_scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">country</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # empty output_scope -&gt; derived based on data source and implementation</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li><code>prefix</code> should not contain quotes or parentheses; <code>input_scopes</code> uses a brace-enclosed set syntax (e.g., <code>{ country }</code>).</li><li>Multiple <code>data_source</code> entries are allowed; for multi-argument links, use <code>delegatedWith(index)</code> to switch the current parameter expression.</li><li>If the dynamic link argument is a single-quoted literal, treat it as a literal; generally no completion is provided.</li><li>Prefer the <code>&lt;type&gt;</code> shorthand in <code>data_source</code> (e.g., <code>&lt;country&gt;</code>) over <code>definition[country]</code>.</li></ul><h4 id="config-scope" tabindex="-1"><a class="header-anchor" href="#config-scope"><span>Scope Configs and Scope Group Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: define &quot;scope types&quot; and their aliases (<code>scopes</code>), and group scopes (<code>scope_groups</code>) for scope checks, chaining constraints, and hints.</p></li><li><p><strong>Path location and fields</strong>:</p><ul><li>Scope: <code>scopes/{name}</code><ul><li><code>name</code>: scope ID.</li><li><code>aliases: string[]</code>: alias set (case-insensitive).</li></ul></li><li>Scope group: <code>scope_groups/{name}</code><ul><li><code>name</code>: group name.</li><li><code>: string[]</code>: scope IDs in this group (case-insensitive).</li></ul></li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    Country</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">aliases</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">country</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scope_groups</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    target_species</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        country</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pop_group</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> leader</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> planet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ship</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fleet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> army</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> species</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> first_contact</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Cooperation with other configs</strong>:</p><ul><li>Works with &quot;System Scopes&quot; to determine scope stacks and meanings; works with &quot;Links&quot; to constrain input/output scopes for chaining.</li><li>In extended configs, you can specify <code>replace_scopes</code> to map system scopes to concrete scope types under specific contexts.</li></ul><h4 id="config-modifier" tabindex="-1"><a class="header-anchor" href="#config-modifier"><span>Modifier Configs and Modifier Category Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: declare modifiers and their categories, used for icon rendering, completion, and scope validation.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Modifier: <ul><li><code>modifiers/{name}</code> (<code>{name}</code> can be a constant or a template expression)</li><li><code>types/type[{type}]/modifiers/{name}</code> (where <code>$</code> is replaced with <code>&lt;{type}&gt;</code>)</li><li><code>types/type[{type}]/modifiers/subtype[{subtype}]/{name}</code> (use <code>{type}.{subtype}</code> as the type expression for replacement)</li></ul></li><li>Modifier category: <code>modifier_categories/{name}</code></li></ul></li><li><p><strong>Fields and semantics (modifier)</strong>:</p><ul><li><code>name</code>: templated name (e.g., <code>job_&lt;job&gt;_add</code>), supporting dynamically generated modifiers.</li><li><code>categories: string | string[]</code>: category names; determine the allowed scope types.</li><li><code>supportedScopes</code>: allowed scope set. <ul><li>If <code>categoryConfigMap</code> is resolved, derive scopes from categories (<code>ParadoxScopeManager.getSupportedScopes(...)</code>).</li><li>Otherwise, fall back to the modifier&#39;s local option <code>supported_scopes</code> (if present).</li></ul></li></ul></li><li><p><strong>Fields and semantics (modifier category)</strong>:</p><ul><li><code>name</code>: category name (e.g., <code>Pops</code>).</li><li><code>supported_scopes: string | string[]</code>: allowed scope set of this category.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Modifier (<code>CwtModifierConfigResolverImpl</code>): <ol><li>Parse <code>categories</code> from value or value-list; skip if missing.</li><li>If from a type config&#39;s <code>modifiers</code>, replace <code>$</code> in <code>name</code> with <code>&lt;{typeExpression}&gt;</code>, where <code>typeExpression</code> is <code>type</code> or <code>type.subtype</code>.</li><li>Parse template expressions and compute <code>supportedScopes</code> (from categories or local options).</li></ol></li><li>Modifier category (<code>CwtModifierCategoryConfigResolverImpl</code>): <ol><li>Parse <code>name</code> and <code>supported_scopes</code>.</li></ol></li></ul></li><li><p><strong>Cooperation with other configs</strong>:</p><ul><li>Works with <code>Types and Subtypes</code> via <code>modifiers</code> to derive type-bound modifier configs.</li><li>Cooperates with <code>Scopes/Links/System Scopes</code> for scope checks and hints.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Independent modifiers</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">modifiers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    pop_happiness</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Pops</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    job_&lt;job&gt;_add</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Planets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Modifiers declared in type configs (will derive templated names)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    type[job]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        modifiers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            job_$_add</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Planets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># -&gt; job_&lt;job&gt;_add</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Modifier categories</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">modifier_categories</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    Pops</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">supported_scopes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">species</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pop_group</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> planet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>A modifier entry without <code>categories</code> will be skipped (ineffective).</li><li>For modifier names under type configs, use <code>$</code> placeholders consistent with type/subtype expressions.</li><li><code>supported_scopes</code> in categories should use standard scope IDs; parsing will normalize case automatically.</li></ul><h4 id="config-localisation" tabindex="-1"><a class="header-anchor" href="#config-localisation"><span>Localisation Command Configs and Localisation Promotion Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: declare the availability and allowed scopes of localisation command fields (Get...), and declare localisation scope promotions to keep command fields available after switching scope via localisation links.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Localisation command: <code>localisation_commands/{name}</code> (<code>{name}</code> is case-insensitive)</li><li>Localisation promotion: <code>localisation_promotions/{name}</code> (<code>{name}</code> is case-insensitive; corresponds to a localisation link name)</li></ul></li><li><p><strong>Fields and semantics</strong>:</p><ul><li>Command: <code>supported_scopes: string | string[]</code> (allowed scope types)</li><li>Promotion: <code>supported_scopes: string | string[]</code> (allowed scopes after promotion)</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Command (<code>CwtLocalisationCommandConfigResolverImpl</code>): parse name (case-insensitive) and <code>supported_scopes</code>.</li><li>Promotion (<code>CwtLocalisationPromotionConfigResolverImpl</code>): parse name (case-insensitive, match localisation link name) and <code>supported_scopes</code>.</li><li>In localisation texts, after switching scope via a localisation link, use the promotion configs to determine which command fields are valid.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">localisation_commands</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    GetCountryType</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">country</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">localisation_promotions</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    Ruler</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">country</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">localisation_links</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ruler</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># In localisation text:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># [Ruler.GetCountryType] is valid under the promoted scope after Ruler link</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Names are case-insensitive; keep the spelling style consistent with actual command fields to improve searchability.</li><li>Promotion names should match localisation link names; otherwise they won&#39;t match correctly.</li><li>When cooperating with &quot;Links (Localisation Links)&quot;, static regular links are copied automatically as localisation links; for dynamic behavior, declare localisation links separately.</li></ul><h4 id="config-type-presentation" tabindex="-1"><a class="header-anchor" href="#config-type-presentation"><span>Type Presentation Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: configure name/description/required localisation keys and main images/splitting configs for a definition type, for UI, navigation, and hints.</p></li><li><p><strong>Path location</strong>:</p><ul><li>Localisation: <code>types/type[{type}]/localisation</code></li><li>Images: <code>types/type[{type}]/images</code></li></ul></li><li><p><strong>Fields and semantics</strong>:</p><ul><li>Both share the same structure: pairs of &quot;subtype expression + location configs&quot; (<code>locationConfigs</code>).</li><li>At runtime, filter and merge by the actual set of definition subtypes to obtain the final config list (<code>getConfigs(subtypes)</code>).</li><li>For location configs, see &quot;Location and Row Matching&quot; â†’ <code>CwtLocationConfig</code>. Common options: <ul><li><code>required</code>: whether this item is mandatory (report hint/error if missing).</li><li><code>primary</code>: whether this item is the primary one (e.g., for main icon/name).</li></ul></li><li>For location expressions, see &quot;Config Expressions â†’ Location Expression&quot;.</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    type[ship_design]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        localisation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            ## primary</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> some_loc_key</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            subtype[corvette]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> some_corvette_loc_key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        images</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            ## primary ## required</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            icon</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;icon|icon_frame&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # image location expression; supports frame and name path parameters</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-db-type" tabindex="-1"><a class="header-anchor" href="#config-db-type"><span>Database Object Type Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: define types and formats for &quot;database object expressions&quot; in localisation (e.g., <code>[&#39;civic:some_civic&#39;, ...]</code>), enabling resolution to definitions or localisation in UI and hints.</p></li><li><p><strong>Path location</strong>: <code>database_object_types/{name}</code>, where <code>{name}</code> is the prefix (e.g., <code>civic</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>type</code>: if present, for <code>prefix:object</code>, treat <code>object</code> as a definition reference of that type.</li><li><code>swap_type</code>: if present, for <code>prefix:object:swap</code>, treat <code>swap</code> as a definition reference of the &quot;swapped type&quot;.</li><li><code>localisation</code>: if present, for <code>prefix:object</code>, treat <code>object</code> as a localisation key.</li></ul></li></ul><p><strong>Example</strong>ï¼š</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">database_object_types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    civic</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> civic_or_origin</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        swap_type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> swapped_civic</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-location" tabindex="-1"><a class="header-anchor" href="#config-location"><span>Location Configs</span></a></h4><ul><li><strong>Purpose</strong>: Declares the location key and location expression for resources such as images/localization.</li><li><strong>Path Location</strong>: <code>types/type[{type}]/localisation/{key}</code> and <code>types/type[{type}]/images/{key}</code>.</li></ul><h4 id="config-row" tabindex="-1"><a class="header-anchor" href="#config-row"><span>Row Configs</span></a></h4><ul><li><strong>Purpose</strong>: Declares column names and value types for CSV rows, used for completion/validation.</li><li><strong>Path Location</strong>: <code>rows/row[{name}]</code>.</li></ul><p><strong>Matching Logic</strong>:</p><ul><li>The combination of <code>path</code>/<code>path_file</code>/<code>path_extension</code>/<code>path_pattern</code>/<code>path_strict</code> determines the set of files to be scanned.</li><li><code>path</code> and <code>path_extension</code> are normalized during parsing.</li><li><code>columns</code> (column name â†’ column config), <code>end_column</code> (termination column name, columns after a match are considered optional trailing columns).</li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">rows</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    row[component_template]</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;game/common/component_templates&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        path_extension</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .csv</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        columns</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;component_template&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # ... other columns</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-locale" tabindex="-1"><a class="header-anchor" href="#config-locale"><span>Locale Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: declare basic information about locales to recognize project/user-preferred locales and improve UI display and localisation validation.</p></li><li><p><strong>Path location</strong>: <code>locales/{id}</code>, where <code>{id}</code> is like <code>l_english</code>.</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>id</code>: locale ID.</li><li><code>codes: string[]</code>: language codes included in the locale (e.g., <code>en</code>, <code>en-US</code>).</li><li>Derived fields: <code>shortId</code> (prefix <code>l_</code> removed), <code>idWithText</code> (with display text).</li><li>Resolver extra capability: can auto-detect by IDE/OS or provide fallback (internal use).</li></ul></li></ul><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">locales</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    l_english</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">codes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;en&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    l_simp_chinese</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">codes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;zh-CN&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="configs-extended" tabindex="-1"><a class="header-anchor" href="#configs-extended"><span>Extended Configs</span></a></h3><blockquote><p>PLS-extended family of configs to enhance IDE features (quick documentation, inlay hints, completion, etc.).</p></blockquote><h4 id="config-extended-scripted-variable" tabindex="-1"><a class="header-anchor" href="#config-extended-scripted-variable"><span>Extended Scripted Variable Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide extra hints (quick doc, inlay hints, etc.) for scripted variables.</p></li><li><p><strong>Path location</strong>: <code>scripted_variables/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: variable name or its matching pattern.</li><li><code>hint: string?</code>: optional extra hint text (for inlay hints or documentation).</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedScriptedVariableConfigResolverImpl</code>).</li><li>Option extraction: read hint text from <code>hint</code> option if present.</li><li>Application: match against scripted variable references in scripts by name/pattern, injecting docs and hints into the UI.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scripted_variables</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## hint = Â§RSome inlay hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scripted_variables</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## hint = Â§RSome hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # or write \`x = 1\`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Name can use template/ANT/regex patterns; avoid overly broad patterns that cause mismatches.</li><li>This entry only provides hint enhancements; it does not declare or validate the value/type of scripted variables.</li></ul><h4 id="config-extended-definition" tabindex="-1"><a class="header-anchor" href="#config-extended-definition"><span>Extended Definition Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide extra context and hint information for concrete definitions.</p><ul><li>Use cases: docs/hints (<code>hint</code>), bind definition type (<code>type</code> required), and optionally specify scope context via <code>replace_scopes</code>/<code>push_scope</code>.</li></ul></li><li><p><strong>Path location</strong>: <code>definitions/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: definition name or its matching pattern.</li><li><code>type: string</code> (required): the definition type this extended item targets. Missing value causes the item to be skipped.</li><li><code>hint: string?</code>: optional hint text (for quick docs/inlay hints).</li><li>Scope context (options): <ul><li><code>replace_scopes</code>: rewrite system scope mapping, e.g., <code>{ this = country root = country }</code>.</li><li><code>push_scope</code>: declare output scope, used by chaining/inspections.</li></ul></li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedDefinitionConfigResolverImpl</code>).</li><li>Required check: missing <code>type</code> will skip this item and log a warning.</li><li>Option extraction: read <code>hint</code>; <code>replace_scopes</code>/<code>push_scope</code> are parsed by common option parsers and used by later context building.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">definitions</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## type = civic_or_origin.civic</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.5, scope context related options are also available here</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## type = scripted_trigger</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">definitions</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## hint = Â§RSome hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## type = scripted_trigger</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # or \`x = ...\`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li><code>type</code> is required; missing it will skip the item (ineffective).</li><li>The name can use template/ANT/regex patterns; avoid overly broad matches that cause false positives.</li><li>This extension provides documentation/context enhancements only; it does not directly change the declaration structure. Cooperation with the declaration happens at use sites during context building and inspections/documentation.</li></ul><h4 id="config-extended-game-rule" tabindex="-1"><a class="header-anchor" href="#config-extended-game-rule"><span>Extended Game Rule Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide docs/hints for game rules (aka definitions of type <code>game_rule</code>), and optionally override declaration configs.</p></li><li><p><strong>Path location</strong>: <code>game_rules/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: name or its matching pattern.</li><li><code>hint: string?</code>: optional hint text (for quick docs/inlay hints).</li><li><code>configForDeclaration: CwtPropertyConfig?</code>: if the current item is a property node, its value/children will be used as an &quot;override declaration&quot; at the use site; if the value is <code>single_alias_right[...]</code>, it will be inlined first.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedGameRuleConfigResolverImpl</code>).</li><li><code>configForDeclaration</code>: only valid when it is a property node; call <code>inlineSingleAlias(...)</code> on the value if applicable, otherwise use the original value.</li><li>Use-site cooperation: <code>GameRuleCwtDeclarationConfigContextProvider</code> overrides the declaration with <code>configForDeclaration</code> when this extended config matches, and it has child configs.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">game_rules</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # use &#39;x = xxx&#39; to override declaration config</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">game_rules</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## hint = Â§RSome hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # provide hint only</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # override declaration via single alias</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Only property nodes produce <code>configForDeclaration</code> and participate in overriding; pure value nodes do not.</li><li>If the value is <code>single_alias_right[...]</code>, it will be inlined before being used as an override.</li><li>This extension only affects the source/structure of declaration and the hints; it does not change global priority or override strategies.</li></ul><h4 id="config-extended-on-action" tabindex="-1"><a class="header-anchor" href="#config-extended-on-action"><span>Extended On Action Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide docs/hints for on actions (aka definitions of type <code>on_action</code>), and specify <code>event_type</code> to influence event-related references in the declaration context.</p></li><li><p><strong>Path location</strong>: <code>on_actions/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: name or its matching pattern.</li><li><code>event_type: string</code> (required): event type. Used to substitute event-related data expressions (e.g., <code>&lt;event&gt;</code>) in the declaration context with the expression for that event type.</li><li><code>hint: string?</code>: optional hint text (for quick docs/inlay hints).</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedOnActionConfigResolverImpl</code>).</li><li>Required check: missing <code>event_type</code> will skip this item and log a warning.</li><li>Use-site cooperation: after matching this extended config, <code>OnActionCwtDeclarationConfigContextProvider</code> substitutes event placeholders in the declaration context with the specified <code>event_type</code> to drive completion/inspections and quick docs.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">on_actions</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## event_type = country</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">on_actions</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  ## hint = Â§RSome hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  ## event_type = country</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li><code>event_type</code> is required; missing it makes the item ineffective.</li><li>Name can use template/ANT/regex patterns; avoid overly broad patterns.</li><li>If scope replacement is needed, combine with general options (e.g., <code>replace_scopes</code>), but whether it participates in specific checks depends on the use-site context and feature implementation.</li></ul><h4 id="config-extended-inline-script" tabindex="-1"><a class="header-anchor" href="#config-extended-inline-script"><span>Extended Inline Script Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: declare context config(s) and scope context for specific inline scripts so that completion/validation at call sites is correct.</p></li><li><p><strong>Path location</strong>: <code>inline_scripts/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>File mapping</strong>: when <code>name</code> is <code>x/y</code>, the file is <code>common/inline_scripts/x/y.txt</code>.</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: inline script name or its matching pattern.</li><li><code>context_configs_type: string = single | multiple</code> (default <code>single</code>): aggregation shape of context configs. <ul><li><code>single</code>: take value (<code>value</code>) as the context config.</li><li><code>multiple</code>: take child configs list (<code>configs</code>) as the context configs.</li></ul></li><li>Scope context (options): <ul><li><code>replace_scopes</code>: rewrite system scope mappings.</li><li><code>push_scope</code>: declare output scope.</li></ul></li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedInlineScriptConfigResolverImpl</code>).</li><li>Container config: if it is a property node, first apply <code>inlineSingleAlias(...)</code> to its value (supports root-level single alias) to get the container config (<code>getContainerConfig()</code>).</li><li>Context configs: <ul><li>If <code>context_configs_type = multiple</code>, take the container config&#39;s child configs; otherwise take the container config&#39;s value config.</li><li>Wrap into a consumable &quot;context configs container&quot; via <code>inlineWithConfigs(...)</code> (<code>getContextConfigs()</code> returns a single-element list).</li></ul></li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">inline_scripts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; is an inline script expression, e.g., for &#39;inline_script = jobs/researchers_add&#39;, &#39;x&#39; should be &#39;jobs/researchers_add&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # use &#39;x = xxx&#39; to declare context config(s) (add &#39;## context_configs_type = multiple&#39; if there are various context configs)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # note extended documentation is unavailable for inline scripts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # more detailed examples for declaring context config(s)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        potential</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        possible</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.5, scope context related options are also available here</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.6, using single alias at root level is also available here</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">inline_scripts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    triggers/some_trigger_snippet</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    triggers/some_trigger_snippet</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    triggers/some_trigger_snippet</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+s+`" alt=""></p><p><strong>Notes</strong>:</p><ul><li>Keep default <code>single</code> when only one context config is needed; use <code>multiple</code> to declare multiple.</li><li>Root-level <code>single_alias_right[...]</code> will be inlined before being used as context configs.</li><li>This extension only provides context/scope information; it does not directly constrain where/How many times the inline script can be called.</li></ul><h4 id="config-extended-parameter" tabindex="-1"><a class="header-anchor" href="#config-extended-parameter"><span>Extended Parameter Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide docs/context enhancements for parameters (<code>$PARAM$</code> or <code>$PARAM|DEFAULT$</code>) in triggers/effects/inline scripts:</p><ul><li>Bind a context key (pointing to a concrete trigger/effect/inline script context).</li><li>Declare context configs and scope context.</li><li>Support inheriting context from use sites.</li></ul></li><li><p><strong>Path location</strong>: <code>parameters/{name}</code>.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>name</code>: parameter name or its matching pattern.</li><li><code>context_key: string</code> (required): context key (e.g., <code>scripted_trigger@X</code>) used to locate the source of the parameter&#39;s context configs.</li><li><code>context_configs_type: string = single | multiple</code> (default <code>single</code>): aggregation shape of context configs. <ul><li><code>single</code>: take value (<code>value</code>) as the context config.</li><li><code>multiple</code>: take child configs list (<code>configs</code>) as the context configs.</li></ul></li><li><code>inherit: boolean = no</code>: whether to inherit context (configs and scopes) from the use site.</li><li>Scope context (options): <ul><li><code>replace_scopes</code>: rewrite system scope mapping.</li><li><code>push_scope</code>: declare output scope.</li></ul></li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedParameterConfigResolverImpl</code>).</li><li>Required check: missing <code>context_key</code> will skip this item and log a warning.</li><li>Container config: if it is a property node, first apply <code>inlineSingleAlias(...)</code> to its value to get the container config (<code>getContainerConfig(...)</code>).</li><li>Context configs: <ul><li>If <code>inherit = yes</code>: climb from the parameter&#39;s use site to the containing script member and take its resolved context config list (dynamic context).</li><li>Otherwise: according to <code>context_configs_type</code>, extract <code>value</code> or <code>configs</code> from the container config and wrap it into a consumable container via <code>inlineWithConfigs(...)</code> (<code>getContextConfigs(...)</code> returns a single-element list).</li></ul></li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; is a parameter name, e.g., for &#39;$JOB$&#39;, &#39;x&#39; should be &#39;JOB&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # use &#39;x = xxx&#39; to declare context config(s) (add &#39;## context_configs_type = multiple&#39; if there are various context configs)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # for value of option &#39;context_key&#39;,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # before &#39;@&#39; is the containing definition type (e.g., &#39;scripted_trigger&#39;), or &#39;inline_script&#39; for inline script parameters</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # after &#39;@&#39; is the containing definition name, or the containing inline script path</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.6, value of option &#39;context_key&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # more detailed examples for declaring context config(s)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localistion</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        localisation</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        scalar</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.5, scope context related options are also available here</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.6, using single alias at root level is also available here</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # since 1.3.12, a parameter&#39;s config context and scope context can be specified to inherit from its context</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # e.g. for parameter &#39;x&#39; with context key &#39;scripted_trigger@some_trigger&#39;, its context is scripted trigger &#39;some_trigger&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = scripted_trigger@some_trigger</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## inherit</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## replace_scopes = { this = country root = country }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = some_trigger</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PARAM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = some_trigger</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    PARAM</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_configs_type = multiple</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    ## context_key = some_trigger</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    PARAM</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> single_alias_right[trigger_clause]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+e+`" alt=""></p><p><strong>Notes</strong>:</p><ul><li><code>context_key</code> is required; missing it makes the item ineffective.</li><li>When <code>inherit = yes</code>, the context is taken from the use site; note it can be empty or vary by position. PLS enables &quot;dynamic context&quot; mode on this path.</li><li>Root-level <code>single_alias_right[...]</code> will be inlined before being used as context configs.</li></ul><h4 id="config-extended-complex-enum-value" tabindex="-1"><a class="header-anchor" href="#config-extended-complex-enum-value"><span>Extended Complex Enum Value Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide docs/hints (quick docs, inlay hints, etc.) for concrete entries of complex enums.</p></li><li><p><strong>Path location</strong>: <code>complex_enum_values/{type}/{name}</code>, where <code>{type}</code> is the complex enum name and <code>{name}</code> is the entry name or a matching pattern.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>type: string</code>: complex enum name (from the path segment <code>{type}</code>).</li><li><code>name</code>: entry name or its matching pattern (from key or value).</li><li><code>hint: string?</code>: optional hint text.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedComplexEnumValueConfigResolverImpl</code>).</li><li>Type source: provided by upper traversal (<code>resolve(config, type)</code>), corresponding to the <code>{type}</code> path segment.</li><li>Option extraction: read hint text from <code>hint</code>.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">complex_enum_values</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    component_tag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## hint = Â§RSome inlay hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">complex_enum_values</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    component_tag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## hint = Â§GUseful noteÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        x</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # or write \`x = ...\`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>This extension does not change how values are collected for complex enums; it only provides hints.</li><li>Name can use template/ANT/regex patterns; avoid overly broad patterns.</li></ul><h4 id="config-extended-dynamic-value" tabindex="-1"><a class="header-anchor" href="#config-extended-dynamic-value"><span>Extended Dynamic Value Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide docs/hints for specific dynamic values under a dynamic value type.</p></li><li><p><strong>Path location</strong>: <code>dynamic_values/{type}/{name}</code>, where <code>{type}</code> is the dynamic value type and <code>{name}</code> is the entry name or a matching pattern.</p></li><li><p><strong>Name matching</strong>: supports constant, template expression, ANT expression, and regex (pattern-aware; see <code>CwtDataTypeGroups.PatternAware</code>).</p></li><li><p><strong>Fields and semantics</strong>:</p><ul><li><code>type: string</code>: dynamic value type (from the path segment <code>{type}</code>).</li><li><code>name</code>: entry name or its matching pattern (from key or value).</li><li><code>hint: string?</code>: optional hint text.</li></ul></li><li><p><strong>Parsing flow (implementation summary)</strong>:</p><ul><li>Name source: use key if it is a property; otherwise use the value (<code>CwtExtendedDynamicValueConfigResolverImpl</code>).</li><li>Type source: provided by upper traversal (<code>resolve(config, type)</code>), corresponding to the <code>{type}</code> path segment.</li><li>Option extraction: read hint text from <code>hint</code>.</li></ul></li></ul><p><strong>Format</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dynamic_values</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    event_target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # &#39;x&#39; or &#39;x = xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # &#39;x&#39; can also be a pattern expression (template expression, ant expression or regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## hint = Â§RSome inlay hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # since 1.3.9, scope context related options are also available here</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # only receive push scope (this scope), ignore others (like root scope, etc.)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## push_scope = country</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        x</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dynamic_values</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    event_target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ### Some documentation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        ## hint = Â§RSome hint textÂ§!</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        owner</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # or write \`owner = ...\`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>This extension does not change the definition of dynamic value types or their base value sets; it only provides hints.</li><li>Name can use template/ANT/regex patterns; avoid overly broad patterns.</li></ul><h3 id="configs-internal" tabindex="-1"><a class="header-anchor" href="#configs-internal"><span>Internal Configs</span></a></h3><blockquote><p>These configs are used internally by the plugin and do not support customization (or are not currently supported).</p></blockquote><h4 id="config-internal-schema" tabindex="-1"><a class="header-anchor" href="#config-internal-schema"><span>Schema Config</span></a></h4><ul><li><p><strong>Purpose</strong>: declare the RHS value shapes for &quot;.cwt&quot; config files themselves for basic completion and (limited) structural checks.</p><ul><li>Currently focuses on initial completion; strict schema validation is not provided yet.</li></ul></li><li><p><strong>Source and loading</strong>:</p><ul><li>Only from built-in file: <code>internal/schema.cwt</code> (cannot be overridden by external files).</li><li>Collected and injected into <code>configGroup.schemas</code> via <code>FileBasedCwtConfigGroupDataProvider.processInternalFile()</code> calling <code>CwtSchemaConfig.resolveInFile(...)</code>.</li></ul></li><li><p><strong>Structure (<code>CwtSchemaConfig</code>)</strong>:</p><ul><li><code>file: CwtFileConfig</code>: the corresponding config file.</li><li><code>properties: CwtPropertyConfig[]</code>: normal keys (keys parsed as Constant/Type/Template forms).</li><li><code>enums: Map&lt;String, CwtPropertyConfig&gt;</code>: keys parsed as enum expressions (<code>$enum:NAME$</code>).</li><li><code>constraints: Map&lt;String, CwtPropertyConfig&gt;</code>: keys parsed as constraint expressions (<code>$$NAME</code>).</li></ul></li></ul><p><strong>Example (in <code>internal/schema.cwt</code>)</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$enum:my_enum$</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># goes into enums</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$$is_valid_key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># goes into constraints</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">some_key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> $any</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # goes into properties</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>Works together with &quot;Config Expressions â†’ Schema Expression&quot;; mainly for editor-side hints and lightweight checking.</li></ul><h4 id="config-internal-folding" tabindex="-1"><a class="header-anchor" href="#config-internal-folding"><span>Folding Settings Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide additional code folding rules for the editor (internal; not customizable for now).</p></li><li><p><strong>Source and loading</strong>:</p><ul><li>Only from built-in file: <code>internal/folding_settings.cwt</code>.</li><li>Collected and injected into <code>configGroup.foldingSettings[group]</code> by <code>FileBasedCwtConfigGroupDataProvider.processInternalFile()</code> calling <code>CwtFoldingSettingsConfig.resolveInFile(...)</code>.</li></ul></li><li><p><strong>Structure (<code>CwtFoldingSettingsConfig</code>)</strong>:</p><ul><li><code>id: string</code>: folding item ID (unique within group).</li><li><code>key: string?</code>: target key (optional).</li><li><code>keys: string[]?</code>: target key set (optional).</li><li><code>placeholder: string</code>: placeholder text after folding (required).</li></ul></li><li><p><strong>Parsing flow (summary)</strong>:</p><ul><li>Read per group: <code>group -&gt; id -&gt; { key/keys/placeholder }</code>.</li><li>Skip and warn when missing <code>placeholder</code> or no child properties.</li><li>Build a case-insensitive map for each group: <code>configGroup.foldingSettings[group][id]</code>.</li></ul></li></ul><p><strong>Example (in <code>internal/folding_settings.cwt</code>)</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">folds</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    expression</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        fold_modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;modifier&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            placeholder</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&lt;modifier&gt; ...&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        fold_triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            keys</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;AND&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;OR&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            placeholder</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&lt;triggers&gt; ...&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li><code>key</code> and <code>keys</code> are alternatives; <code>keys</code> is for multiple keys. When both exist, the consumer decides (current implementation reads both).</li><li>Final behavior is controlled by the folding builder, see <code>ParadoxExpressionFoldingBuilder</code>.</li></ul><h4 id="config-internal-postfix" tabindex="-1"><a class="header-anchor" href="#config-internal-postfix"><span>Postfix Template Settings Configs</span></a></h4><ul><li><p><strong>Purpose</strong>: provide additional postfix template abilities for the editor (internal; not customizable for now).</p></li><li><p><strong>Source and loading</strong>:</p><ul><li>Only from built-in file: <code>internal/postfix_template_settings.cwt</code>.</li><li>Collected and injected into <code>configGroup.postfixTemplateSettings[group]</code> by <code>FileBasedCwtConfigGroupDataProvider.processInternalFile()</code> calling <code>CwtPostfixTemplateSettingsConfig.resolveInFile(...)</code>.</li></ul></li><li><p><strong>Structure (<code>CwtPostfixTemplateSettingsConfig</code>)</strong>:</p><ul><li><code>id: string</code>: template ID (unique within group).</li><li><code>key: string</code>: trigger key (required), the keyword where postfix can be applied.</li><li><code>example: string?</code>: example text (optional) to help understand the template.</li><li><code>variables: Map&lt;string, string&gt;</code>: variable name â†’ default value (for editable template variables).</li><li><code>expression: string</code>: template expression (required), parsed and applied by postfix template implementations.</li></ul></li><li><p><strong>Parsing flow (summary)</strong>:</p><ul><li>Read per group: <code>group -&gt; id -&gt; { key/example/variables/expression }</code>.</li><li>Skip and warn when missing <code>key</code> or <code>expression</code>.</li><li>Read <code>variables</code> as a child property map: <code>name = defaultValue</code>.</li><li>Build a case-insensitive map: <code>configGroup.postfixTemplateSettings[group][id]</code>.</li></ul></li></ul><p><strong>Example (in <code>internal/postfix_template_settings.cwt</code>)</strong>:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">postfix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    variable_ops</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        decr</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;variable&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            example</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;$x.decr&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            variables</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">amount</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            expression</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> &quot;\${x} = \${x} - \${amount}&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>The semantics of <code>expression</code> are controlled by the postfix template implementation, e.g., <code>ParadoxExpressionEditablePostfixTemplate</code>.</li><li><code>variables</code> only provide defaults; actual editing behavior is decided by the template implementation.</li></ul><h2 id="config-expressions" tabindex="-1"><a class="header-anchor" href="#config-expressions"><span>Config Expressions</span></a></h2><blockquote><p>This chapter introduces the purposes, formats, defaults, and edge behaviors of various config expressions.</p></blockquote><h3 id="basic-concepts-and-scope" tabindex="-1"><a class="header-anchor" href="#basic-concepts-and-scope"><span>Basic Concepts and Scope</span></a></h3><p>Config expressions are structured syntax used inside string fields of configs to describe value shapes or matching patterns.</p><p>Include:</p><ul><li>Data Expression: parse data types or dynamic snippets.</li><li>Template Expression: patterns concatenating constants and dynamic snippets for flexible matching.</li><li>Cardinality Expression: declare occurrence ranges and strict/lenient checks.</li><li>Location Expression: locate resources like images/localisations.</li><li>Schema Expression: declare RHS value shapes in config files.</li></ul><h3 id="config-expression-data" tabindex="-1"><a class="header-anchor" href="#config-expression-data"><span>Data Expression</span></a></h3><p>Describe value shapes for keys/values in script files: constants, basic data types, references, and expressions that resolve to dynamic content.</p><p>Key points:</p><ul><li><strong>Key/Value context</strong>: parse differently for keys (<code>isKey=true</code>) vs values (<code>isKey=false</code>).</li><li><strong>Type</strong>: the resolved concrete data type (e.g., <code>int</code>, <code>float</code>, <code>scalar</code>, <code>enum[...]</code>, <code>scope[...]</code>, <code>&lt;type_key&gt;</code>, etc.).</li><li><strong>Extended metadata</strong>: number ranges, case strategy, etc., depending on type (e.g., <code>int[-5..100]</code>, <code>float[-inf..inf]</code>, <code>ignoreCase</code>).</li></ul><p>Defaults and edge behavior:</p><ul><li><strong>Fallback</strong>: when nothing matches, fall back to <code>Constant</code> and store the original string in extension property <code>value</code>.</li><li><strong>Empty string/block</strong>: empty string as <code>Constant(&quot;&quot;)</code>; parsing a block returns <code>Block</code> type as a placeholder.</li><li><strong>Definition <code>&lt;...&gt;</code> shorthand</strong>: prefer <code>&lt;country&gt;</code> over <code>definition[country]</code>.</li><li><strong>Mixing multiple data sources</strong>: allowed in templates/combinations, e.g., <code>&lt;country&gt;/&lt;planet&gt;</code>, <code>dynamic_value[test_flag]</code>.</li><li><strong>Single-quoted literals in dynamic links</strong>: for <code>relations(&#39;...&#39;)</code>, a single-quoted argument is treated as a literal: no completion, and return early in completion entry.</li></ul><p>Examples:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">int</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">float</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">enum[shipsize_class]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">scope[country]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&lt;ship_size&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pre_&lt;opinion_modifier&gt;_suf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="config-expression-template" tabindex="-1"><a class="header-anchor" href="#config-expression-template"><span>Template Expression</span></a></h3><p>Describe more complex value shapes (as a combination of multiple data expressions). Built from segments: constant fields + dynamic snippets (restricted data expressions).</p><p>Defaults and constraints:</p><ul><li><strong>No whitespace</strong>: any whitespace makes it invalid (empty expression returned).</li><li><strong>Segment decision</strong>: a single segment (pure constant or single dynamic) is not considered a template (empty expression returned).</li><li><strong>Matching strategy</strong>: only scan dynamic configs with both prefix and suffix; use &quot;leftmost earliest&quot; splitting.</li><li><strong>Segment types</strong>: each segment delegates to data expression parsing; unmatched segments degrade to Constant.</li><li><strong>Reference counting</strong>: only non-Constant segments are counted as &quot;reference segments&quot; for subsequent reference/navigation.</li></ul><p>Examples:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">job_&lt;job&gt;_add</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # &quot;job&quot; + &lt;job&gt; + &quot;_add&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">xxx_value[anything]_xxx</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # &quot;xxx_&quot; + value[anything] + &quot;_xxx&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">a_enum[weight_or_base]_b</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # &quot;a_&quot; + enum[weight_or_base] + &quot;_b&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">value[gui_element_name]:&lt;sprite&gt;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # value[gui_element_name] + &quot;:&quot; + sprite</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">value[gui_element_name]:localisation</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # value[gui_element_name] + &quot;:&quot; + localisation</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes</strong>:</p><ul><li>When constants are adjacent to segments that look like config names, prefer correct recognition of dynamic configs to avoid treating &quot;symbol + config name&quot; as a single constant.</li><li>If whitespace is needed, use a more appropriate matching method (e.g., ANT/regex).</li></ul><h3 id="config-expression-cardinality" tabindex="-1"><a class="header-anchor" href="#config-expression-cardinality"><span>Cardinality Expression</span></a></h3><p>Constrain occurrences of definition members, driving inspections/completions. Supports lenient checks and infinite upper bounds.</p><p>Use <code>min..max</code> for the range; <code>~</code> marks lenient; <code>inf</code> means infinity.</p><p>Defaults and edge behavior:</p><ul><li><strong>Min &lt; 0</strong>: clamped to 0.</li><li><strong>max = <code>inf</code> (case-insensitive)</strong>: infinite.</li><li><strong>No <code>..</code></strong>: invalid, no constraint.</li><li><strong>min &gt; max</strong>: invalid, no constraint.</li></ul><p>Examples:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## cardinality = 0..1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## cardinality = 0..inf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## cardinality = ~1..10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="config-expression-location" tabindex="-1"><a class="header-anchor" href="#config-expression-location"><span>Location Expression</span></a></h3><p>Locate resource sources (images/localisations, etc.). If the expression contains <code>$</code>, it is treated as a placeholder to be substituted later with dynamic content such as definition names or property values.</p><h4 id="config-expression-location-image" tabindex="-1"><a class="header-anchor" href="#config-expression-location-image"><span>Image Location Expression</span></a></h4><p>Locate images related to a definition.</p><p>Syntax and conventions:</p><ul><li>Use <code>|</code> to separate args: <code>&lt;location&gt;|&lt;args...&gt;</code>.</li><li>Args starting with <code>$</code> are name text source paths (comma-separated allowed): substitute placeholders, write into namePaths.</li><li>Other args are frame source paths (comma-separated allowed): used for image splitting, write into framePaths.</li><li>When repeated args of the same kind appear (all starting with <code>$</code>, or all non-<code>$</code>), the latter wins.</li></ul><p>Examples:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gfx/interface/icons/modifiers/mod_$.dds</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gfx/interface/icons/modifiers/mod_$.dds|$name</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gfx/interface/icons/modifiers/mod_$_by_$.dds|$name</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">GFX_$</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">icon</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">icon|p1,p2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note: <code>icon</code> can be parsed as a file path, a sprite name, or a definition name; for a definition name, parse its most relevant image next.</p><h4 id="config-expression-localisation" tabindex="-1"><a class="header-anchor" href="#config-expression-localisation"><span>Localisation Location Expression</span></a></h4><p>Locate localisations related to a definition.</p><p>Syntax and conventions:</p><ul><li>Use <code>|</code> to separate args: <code>&lt;location&gt;|&lt;args...&gt;</code>.</li><li>Args starting with <code>$</code> are name text source paths (comma-separated allowed), written to namePaths.</li><li>Arg <code>u</code> forces the final name to UPPER case. Only effective when placeholders are used.</li><li>When <code>$</code> args repeat, the latter wins.</li></ul><p>Examples:</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$_desc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$_desc|$name</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$_desc|$name|u</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$_desc|$name,$alt_name</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # multiple name paths, comma-separated</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$_desc|$name|$alt_name</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # when \`$\` repeats, the latter wins</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">title</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="config-expression-schema" tabindex="-1"><a class="header-anchor" href="#config-expression-schema"><span>Schema Expression</span></a></h3><p>Describe value shapes for keys and values in config files themselves, enabling completion and inspections for config files. Currently used for basic completion, and only in <code>cwt/core/schema.cwt</code>.</p><p>Supported forms:</p><ul><li><strong>Constant</strong>: a plain string without <code>$</code>.</li><li><strong>Template</strong>: contains one or more params (<code>$...$</code>), e.g., <code>$type$</code>, <code>type[$type$]</code>.</li><li><strong>Type</strong>: starts with a single <code>$</code>, e.g., <code>$any</code>, <code>$int</code>.</li><li><strong>Constraint</strong>: starts with <code>$$</code>, e.g., <code>$$declaration</code>.</li></ul><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h2><h4 id="faq-template" tabindex="-1"><a class="header-anchor" href="#faq-template"><span>About Template Expressions</span></a></h4><p>Template expressions are composed of multiple data expressions (e.g., definition/localisation/string literal related data expressions) for more flexible matching.</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a string literal, exactly matches &#39;x&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">x</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a template expression which contains a reference to jobs, matches &#39;a_researcher_b&#39;, &#39;a_farmer_b&#39;, etc.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">a_&lt;job&gt;_b</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a template expression which contains a references to enum values of &#39;weight_or_base&#39;, matches &#39;a_weight_b&#39; and &#39;a_base_b&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">a_enum[weight_or_base]_b</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a template expression which contains a references to dynamic values of &#39;anything&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># generally, there is no limit for &#39;value[anything]&#39;, so this expression is equivalent to regex &#39;a_.*_b&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">a_value[anything]_b</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="faq-ant" tabindex="-1"><a class="header-anchor" href="#faq-ant"><span>How to use ANT path patterns in config files</span></a></h4><p>PLS extends config expressions. Since plugin version 1.3.6, you can use ANT path patterns for more flexible matching.</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a ant expression use prefix &#39;ant:&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ant:/foo/bar?/*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a ant expression use prefix &#39;ant.i:&#39; (ignore case)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ant.i:/foo/bar?/*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># wildcards in ant expression:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;?&#39; - used to match any single character</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;*&#39; - used to match any characters (exclude &#39;/&#39;)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;**&#39; - used to match any characters</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="faq-regex" tabindex="-1"><a class="header-anchor" href="#faq-regex"><span>How to use regex in config files</span></a></h4><p>PLS extends config expressions. Since plugin veresion 1.3.6, you can use regex for more flexible matching.</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a regex use prefix &#39;re:&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">re:foo.*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># a regex use prefix &#39;re.i:&#39; (ignore case)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">re.i:foo.*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="faq-scope" tabindex="-1"><a class="header-anchor" href="#faq-scope"><span>How to specify scope context in config files</span></a></h4><p>Scope context is specified via options <code>push_scope</code> and <code>replace_scopes</code>.</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># push &#39;country&#39; scope to scope stack</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># for this example, the next this scope will be &#39;country&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## push_scope = country</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">some_config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># replace scopes of specific system scopes into scope context</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># not supported for &#39;prev&#39; system scope (and &#39;prevprev&#39;, etc.)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># for this example, the next this scope will be &#39;country&#39;, so do the next root scope and the next from scope</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## replace_scopes = { this = country root = country from = country }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">some_config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="faq-config-injection" tabindex="-1"><a class="header-anchor" href="#faq-config-injection"><span>å¦‚ä½•åœ¨è§„åˆ™æ–‡ä»¶ä¸­è¿›è¡Œè§„åˆ™æ³¨å…¥</span></a></h4><p>Since plugin version 2.1.0, config injection can be performed during the resolving phase of config by using the <code>## inject</code> option.</p><p>If there is an existing config snippet</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># some/file.cwt</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">some</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then the config snippet</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># some/other/file.cwt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## inject = some/file.cwt@some/property</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## inject = some/file.cwt@some/property</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## inject = some/file.cwt@some/property</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k3</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    p</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After processing, is equivalent to</p><div class="language-cwt line-numbers-mode" data-highlighter="shiki" data-ext="cwt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cwt"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># some/other/file.cwt</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">k3</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    p</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    property</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notes:</p><ul><li>The part before <code>@</code> is the path of the config file relative to the config group directory (e.g., the <code>config/stellaris</code> directory in the plugin&#39;s jar package) and must match exactly (wildcards are not supported, and case sensitivity is not ignored).</li><li>The part after <code>@</code> is the config path. The subpath <code>-</code> matches all individual values, while in other cases, it acts as a wildcard (case-insensitive, using <code>any</code> or <code>*</code> to match any character, and <code>?</code> to match a single character) to match all attributes of the corresponding key.</li><li>This only applies to configs where the value is a clause (i.e., <code>k = {...}</code> or <code>{...}</code>). The matched configs are injected at the end of the clause as sub-configs of the target config.</li><li>Config injection is processed only once during the parsing phase of the config file, so injection can be performed anywhere in any config file.</li><li>If injection fails (e.g., the matched config does not exist, recursion occurs, etc.), it is simply ignored, and a warning log is printed.</li></ul>`,279)])])}const k=n(o,[["render",r]]),g=JSON.parse('{"path":"/en/ref-config-format.html","title":"Appendix: Config Format Reference","lang":"en-US","frontmatter":{"description":"Appendix: Config Format Reference Positioning & Vision This reference targets authors and maintainers who want to \\"understand / write / extend\\" CWT configs (CWT config files), a...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Appendix: Config Format Reference\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-19T19:05:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DragonKnightOfBreeze\\",\\"url\\":\\"https://github.com/DragonKnightOfBreeze\\",\\"email\\":\\"dk_breeze@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://windea.icu/Paradox-Language-Support/en/ref-config-format.html"}],["meta",{"property":"og:site_name","content":"Paradox Language Support"}],["meta",{"property":"og:title","content":"Appendix: Config Format Reference"}],["meta",{"property":"og:description","content":"Appendix: Config Format Reference Positioning & Vision This reference targets authors and maintainers who want to \\"understand / write / extend\\" CWT configs (CWT config files), a..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-19T19:05:38.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-19T19:05:38.000Z"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://windea.icu/Paradox-Language-Support/zh/ref-config-format.html"}]]},"git":{"createdTime":1771527938000,"updatedTime":1771527938000,"contributors":[{"name":"DragonKnightOfBreeze","username":"DragonKnightOfBreeze","email":"dk_breeze@qq.com","commits":1,"url":"https://github.com/DragonKnightOfBreeze"}]},"readingTime":{"minutes":27.87,"words":8361},"filePathRelative":"en/ref-config-format.md","autoDesc":true}');export{k as comp,g as data};
