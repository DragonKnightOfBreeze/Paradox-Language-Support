<idea-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <fileType
        language="PARADOX_SCRIPT"
        name="Paradox Script" fieldName="INSTANCE"
        implementationClass="icu.windea.pls.script.ParadoxScriptFileType" fileNames="descriptor.mod"/>
    <lang.parserDefinition
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.psi.ParadoxScriptParserDefinition"/>

    <stubElementTypeHolder
        class="icu.windea.pls.script.psi.ParadoxScriptStubElementTypes"
        externalIdPrefix="paradoxScript."/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxScriptedVariableNameIndex"/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxDefinitionNameIndex"/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxDefinitionTypeIndex"/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxValueInValueSetIndex"/>

    <spellchecker.support
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.ParadoxScriptSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.highlighter.ParadoxScriptSyntaxHighlighterFactory"/>
    <psi.referenceContributor
        language="PARADOX_SCRIPT"
        implementation="icu.windea.pls.script.expression.reference.ParadoxScriptReferenceContributor"/>
    <colorSettingsPage
        implementation="icu.windea.pls.script.editor.ParadoxScriptColorSettingsPage"/>
    <lang.braceMatcher
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptBraceMatcher"/>
    <lang.foldingBuilder
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptFoldingBuilder"/>
    <lang.commenter
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptCommenter"/>
    <breadcrumbsInfoProvider
        implementation="icu.windea.pls.script.editor.ParadoxScriptBreadCrumbsProvider"/>
    <colorProvider
        implementation="icu.windea.pls.script.editor.ParadoxScriptColorProvider"/>
    <lang.quoteHandler
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptQuoteHandler"/>
    <lang.documentationProvider
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptDocumentationProvider"/>
    <lang.findUsagesProvider
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptFindUsagesProvider"/>
    <lang.implementationTextSelectioner
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptImplementationTextSelectioner"/>
    <elementDescriptionProvider implementation="icu.windea.pls.script.editor.ParadoxScriptFindUsagesProvider"/>
    <!--<gotoDeclarationHandler implementation="icu.windea.pls.script.editor.ParadoxScriptGotoDeclarationHandler"/>-->
    <annotator
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptAnnotator"/>
    <codeInsight.parameterInfo
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptParameterInfoHandler"/>
    <!--Try to keep correct inlay hint order-->
    <!--<codeInsight.inlayProvider-->
    <!--    language="PARADOX_SCRIPT"-->
    <!--    id="ParadoxScriptedVariableReferenceInfoHintsProvider"-->
    <!--    implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxScriptedVariableReferenceInfoHintsProvider"/>-->
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxDefinitionInfoHintsProvider"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxDefinitionInfoHintsProvider"/>
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxDefinitionLocalizedNameHintsProvider" order="after ParadoxDefinitionInfoHintsProvider"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxDefinitionLocalizedNameHintsProvider"/>
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxDefinitionReferenceInfoHintsProvider" order="after ParadoxDefinitionLocalizedNameHintsProvider"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxDefinitionReferenceInfoHintsProvider"/>
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxDefinitionReferenceLocalizedNameHintsProvider"
        order="after ParadoxDefinitionReferenceInfoHintsProvider"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxDefinitionReferenceLocalizedNameHintsProvider"/>
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxLocalisationReferenceInfoHintsProvider"
        order="after ParadoxDefinitionReferenceLocalizedNameHintsProvider"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxLocalisationReferenceInfoHintsProvider"/>
    <codeInsight.inlayProvider
        language="PARADOX_SCRIPT"
        id="ParadoxValueInValueSetInfoHintsProvider"
        order="last"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxValueInValueSetInfoHintsProvider"/>x
    <lang.formatter
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.formatter.ParadoxScriptFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="icu.windea.pls.script.codeStyle.ParadoxScriptCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="icu.windea.pls.script.codeStyle.ParadoxScriptLanguageCodeStyleSettingsProvider"/>
    <gotoSymbolContributor implementation="icu.windea.pls.script.navigation.ParadoxDefinitionChooseByNameContributor"/>
    <gotoSymbolContributor implementation="icu.windea.pls.script.navigation.ParadoxScriptedVariableChooseByNameContributor"/>
    <navbar implementation="icu.windea.pls.script.navigation.ParadoxScriptNavBar"/>
    <projectViewNodeDecorator
        implementation="icu.windea.pls.script.projectView.ParadoxScriptProjectViewNodeDecorator"/>
    <lang.psiStructureViewFactory
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.structureView.ParadoxScriptStructureViewFactory"/>
    <fileStructureGroupRuleProvider implementation="icu.windea.pls.script.usages.ParadoxDefinitionFileStructureGroupRuleProvider"/>
    <lang.refactoringSupport
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptRefactoringSupportProvider"/>
    <renameInputValidator
        implementation="icu.windea.pls.script.refactoring.ParadoxScriptVariableRenameInputValidator"/>
    <renameInputValidator
        implementation="icu.windea.pls.script.refactoring.ParadoxScriptParameterRenameInputValidator"/>
    <refactoring.extractIncludeHandler
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptIntroduceLocalScriptedVariableHandler"/>
    <refactoring.extractIncludeHandler
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptIntroduceGlobalScriptedVariableHandler"/>
    <refactoring.inlineHandler
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptInlineHandler"/>
    <completion.contributor
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.codeInsight.completion.ParadoxScriptCompletionContributor"/>
    <codeInsight.typeInfo
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxScriptTypeProvider"/>
    <typeDeclarationProvider
        implementation="icu.windea.pls.script.codeInsight.ParadoxScriptTypeDeclarationProvider"/>
    <declarationRangeHandler
        key="icu.windea.pls.script.psi.ParadoxScriptProperty"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxDefinitionDeclarationRangeHandler"/>
    <codeInsight.lineMarkerProvider
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.codeInsight.makers.ParadoxDefinitionLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.codeInsight.makers.ParadoxRelatedLocalisationLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider
        language="PARADOX_SCRIPT"
        implementationClass="icu.windea.pls.script.codeInsight.makers.ParadoxRelatedImagesLineMarkerProvider"/>
    <errorQuickFixProvider
        implementation="icu.windea.pls.script.codeInsight.ParadoxScriptErrorQuickFixProvider"/>

    <additionalTextAttributes scheme="Default" file="colorSchemes/ParadoxScriptDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/ParadoxScriptDarcula.xml"/>

    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptUnresolvedScriptedVariable"
                     enabledByDefault="true" level="ERROR"
                     bundle="messages.PlsBundle" key="script.inspection.unresolvedScriptedVariable"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection"
                     implementationClass="icu.windea.pls.script.inspections.UnresolvedScriptedVariableInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptDuplicateScriptedVariables"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle" key="script.inspection.duplicateScriptedVariables"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection"
                     implementationClass="icu.windea.pls.script.inspections.DuplicateScriptedVariablesInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptIncorrectFileEncoding"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle" key="script.inspection.incorrectFileEncoding"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection"
                     implementationClass="icu.windea.pls.script.inspections.IncorrectFileEncodingInspection"/>
    <!--advanced-->
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptMissingLocalisation"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle"
                     key="script.inspection.advanced.inspection.missingLocalisation"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.advanced"
                     groupPathKey="script.inspection.advanced.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.MissingLocalisationInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptMissingImage"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle"
                     key="script.inspection.advanced.inspection.missingImage"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.advanced"
                     groupPathKey="script.inspection.advanced.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.MissingImageInspection"/>
    <!--<localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptUnexpectedSyntax"-->
    <!--                 enabledByDefault="true" level="ERROR"-->
    <!--                 bundle="messages.PlsBundle" key="script.inspection.advanced.unexpectedSyntax"-->
    <!--                 groupBundle="messages.PlsBundle" groupKey="script.inspection.advanced"-->
    <!--                 groupPathKey="script.inspection.advanced.path"-->
    <!--                 implementationClass="icu.windea.pls.script.inspections.advanced.UnexpectedScriptSyntaxInspection"/>-->
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptUnresolvedFilePath"
                     enabledByDefault="true" level="ERROR"
                     bundle="messages.PlsBundle" key="script.inspection.advanced.inspection.unresolvedFilePath"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.advanced"
                     groupPathKey="script.inspection.advanced.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.UnresolvedFilePathInspection"/>
    <!--advanced > expression-->
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptIncorrectScopeFieldExpression"
                     enabledByDefault="true" level="ERROR"
                     bundle="messages.PlsBundle" key="script.inspection.expression.incorrectScopeFieldExpression"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.expression"
                     groupPathKey="script.inspection.expression.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.expression.IncorrectScopeFieldExpressionInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptIncorrectValueFieldExpression"
                     enabledByDefault="true" level="ERROR"
                     bundle="messages.PlsBundle" key="script.inspection.expression.incorrectValueFieldExpression"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.expression"
                     groupPathKey="script.inspection.expression.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.expression.IncorrectValueFieldExpressionInspection"/>
    <!--advanced > event-->
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptMissingEventNamespace"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle" key="script.inspection.event.missingEventNamespace"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.event"
                     groupPathKey="script.inspection.event.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.event.MissingEventNamespaceInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptIncorrectEventNamespace"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle" key="script.inspection.event.incorrectEventNamespace"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.event"
                     groupPathKey="script.inspection.event.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.event.IncorrectEventNamespaceInspection"/>
    <localInspection language="PARADOX_SCRIPT" shortName="ParadoxScriptIncorrectEventId"
                     enabledByDefault="true" level="WARNING"
                     bundle="messages.PlsBundle" key="script.inspection.event.incorrectEventId"
                     groupBundle="messages.PlsBundle" groupKey="script.inspection.event"
                     groupPathKey="script.inspection.event.path"
                     implementationClass="icu.windea.pls.script.inspections.advanced.event.IncorrectEventIdInspection"/>
  </extensions>

  <actions>
    <group id="ParadoxScript.RefactoringGroup" popup="false">
      <action id="ParadoxScript.IntroduceLocalScriptedVariable"
              class="icu.windea.pls.script.refactoring.ParadoxScriptIntroduceLocalScriptedVariableAction">
        <keyboard-shortcut first-keystroke="control alt v" keymap="$default"/>
        <add-to-group group-id="IntroduceActionsGroup" anchor="first"/>
      </action>
      <action id="ParadoxScript.IntroduceGlobalScriptedVariable"
              class="icu.windea.pls.script.refactoring.ParadoxScriptIntroduceGlobalScriptedVariableAction">
        <keyboard-shortcut first-keystroke="control alt g" keymap="$default"/>
        <add-to-group group-id="IntroduceActionsGroup" anchor="after"
                      relative-to-action="ParadoxScript.IntroduceLocalScriptedVariable"/>
      </action>
    </group>
  </actions>
</idea-plugin>