<idea-plugin>
  <id>com.windea.paradox</id>
  <name>Paradox Language Support</name>
  <category>Languages</category>

  <vendor email="dk_breeze@qq.com" url="https://github.com/DragonKnightOfBreeze">DragonKnightOfBreeze</vendor>

  <depends>com.intellij.modules.lang</depends>

  <description><![CDATA[
    <p>
      Support for Paradox Language.
    </p>
    <p>
      This plugin is under developing, so some complex functions may not be implemented yet.
      If you want more perfect language support, please consider using <b>VSCode</b> with <b>CWTools</b> plugin.
    </p>
    <p>
      Create the descriptor file <b>descriptor.mod</b> in the root directory of your Mod to provide language support.
      If you want to add game directory and third party mod as dependencies, just add them as libraries to the project module of your mod, like what Java and Kotlin does.
    </p>
    <p>
      Currently Only Support <b>Stellaris</b>.
      Currently the rule file to implement functions such as validate and provide code completion is not perfect yet.
    </p>
    <p>
      The <a href="https://dragonknightofbreeze.github.io/paradox-language-support">reference documents</a> will be provided in the future.  
    </p>
    <p>
      If you have found any bugs or problems, feel free to report them in project's <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/issues">Github Issue Page</a>.
    </p>
    <p>
      Welcome to have a look at <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support">this project</a> and <a href="https://github.com/DragonKnightOfBreeze?tab=repositories">my other projects</a>.
    </p>

    <br>

    <p>
      Paradox语言支持。
    </p>
    <p>
      这个插件正在开发中，部分比较复杂的功能可能尚未实现。
      如果需要更加完善的语言支持，请考虑使用<b>VSCode</b>以及<b>CWTools</b>插件。
    </p>
    <p>
      在你的模组根文件夹下创建描述符文件<b>descriptor.mod</b>，即可提供语言支持。
      如果需要添加游戏目录以及第三方模组作为依赖，如同Java和Kotlin一样，将它们作为库添加到你的模组对应的项目模块即可。
    </p>
    <p>
      目前仅支持<b>Stellaris</b>。
      目前用于提供验证和代码补全等功能的规则文件尚不完善。
    </p>
    <p>
      <a href="https://dragonknightofbreeze.github.io/paradox-language-support">参考文档</a>将会在未来提供。
    </p>
    <p>
      如果遇到BUG或问题，欢迎在项目的<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/issues">Github Issue页面</a>提出。
    </p>
    <p>
      欢迎查看<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support">本项目</a>和<a href="https://github.com/DragonKnightOfBreeze?tab=repositories">我的其他项目</a>。
    </p>
    ]]></description>

  <change-notes><![CDATA[
    <p>
      Please see the <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/CHANGELOG.md">CHANGELOG</a> written by Simple Chinese.
    </p>

    <br>

    <p>
      请查看<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/CHANGELOG.md">CHANGELOG</a>。
    </p>
    ]]></change-notes>

  <resource-bundle>messages.PlsBundle</resource-bundle>

  <extensions defaultExtensionNs="com.intellij">
    <!--region Core-->
    <renameHandler implementation="com.windea.plugin.idea.pls.core.refactoring.PsiCheckRenameHandler"/>
    
    <!--suppress PluginXmlValidity -->
    <applicationService serviceImplementation="com.windea.plugin.idea.pls.core.rule.ParadoxRuleGroupProvider" preload="true" order="first"/>
    <!--suppress PluginXmlValidity -->
    <fileTypeOverrider implementation="com.windea.plugin.idea.pls.core.ParadoxFileTypeOverrider"/>

    <!--<sdkType implementation="com.windea.plugin.idea.pls.library.StellarisSdkType"/>-->
    <library.type implementation="com.windea.plugin.idea.pls.core.library.StellarisLibraryType"/>

    <applicationConfigurable
        id="settings.language.paradox"
        groupId="language"
        instance="com.windea.plugin.idea.pls.core.settings.ParadoxSettingsConfigurable"/>
    <applicationService
        serviceImplementation="com.windea.plugin.idea.pls.core.settings.ParadoxSettingsState"/>
    <!--endregion-->

    <!--region Cwt Language-->
    <fileType
      language="Cwt Config"
      name="Cwt Config File" fieldName="INSTANCE"
      implementationClass="com.windea.plugin.idea.pls.cwt.CwtFileType"
      extensions="cwt"/>
    <lang.parserDefinition
      language="Cwt Config"
      implementationClass="com.windea.plugin.idea.pls.cwt.psi.CwtParseDefinition"/>

    <spellchecker.support
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.CwtSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.highlighter.CwtSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="com.windea.plugin.idea.pls.cwt.highlighter.CwtColorSettingsPage"/>
    <lang.braceMatcher
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.editor.CwtBraceMatcher"/>
    <lang.foldingBuilder
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.editor.CwtFoldingBuilder"/>
    <lang.quoteHandler
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.editor.CwtQuoteHandler"/>
    <lang.commenter
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.editor.CwtCommenter"/>
    <lang.psiStructureViewFactory
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.structureView.CwtStructureViewFactory"/>
    <lang.formatter
        language="Cwt Config"
        implementationClass="com.windea.plugin.idea.pls.cwt.formatter.CwtFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.cwt.formatter.CwtCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.cwt.formatter.CwtLanguageCodeStyleSettingsProvider"/>
    <!--endregion-->
    
    
    <!--region Paradox Script Language-->
    <fileType
        language="Paradox Script"
        name="Paradox Script File" fieldName="INSTANCE"
        implementationClass="com.windea.plugin.idea.pls.script.ParadoxScriptFileType"/>
    <lang.fileViewProviderFactory
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.psi.ParadoxScriptFileViewProviderFactory"/>
    <lang.parserDefinition
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.psi.ParadoxScriptParserDefinition"/>
    
    <stubElementTypeHolder
        class="com.windea.plugin.idea.pls.script.psi.ParadoxScriptStubElementTypes"
        externalIdPrefix="paradoxScript."/>
    <stubIndex implementation="com.windea.plugin.idea.pls.script.psi.ParadoxDefinitionNameIndex"/>
    <stubIndex implementation="com.windea.plugin.idea.pls.script.psi.ParadoxDefinitionTypeIndex"/>
    <stubIndex implementation="com.windea.plugin.idea.pls.script.psi.ParadoxScriptVariableNameIndex"/>
    <stubIndex implementation="com.windea.plugin.idea.pls.script.psi.ParadoxScriptLocalisationNameIndex"/>
    
    <spellchecker.support
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.ParadoxScriptSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.highlighter.ParadoxScriptSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="com.windea.plugin.idea.pls.script.highlighter.ParadoxScriptColorSettingsPage"/>
    <lang.braceMatcher
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptBraceMatcher"/>
    <lang.foldingBuilder
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptFoldingBuilder"/>
    <lang.commenter
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptCommenter"/>
    <breadcrumbsInfoProvider
        implementation="com.windea.plugin.idea.pls.script.editor.ParadoxScriptBreadCrumbsProvider"/>
    <colorProvider
        implementation="com.windea.plugin.idea.pls.script.editor.ParadoxScriptColorProvider"/>
    <lang.quoteHandler
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptQuoteHandler"/>
    <lang.documentationProvider
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptDocumentationProvider"/>
    <elementDescriptionProvider
        implementation="com.windea.plugin.idea.pls.script.editor.ParadoxScriptDescriptionProvider"/>
    <lang.findUsagesProvider
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptFindUsagesProvider"/>
    <annotator
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.editor.ParadoxScriptAnnotator"/>
    <lang.psiStructureViewFactory
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.structureView.ParadoxScriptStructureViewFactory"/>
    <lang.formatter
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.formatter.ParadoxScriptFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.script.formatter.ParadoxScriptCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.script.formatter.ParadoxScriptLanguageCodeStyleSettingsProvider"/>
    <lang.refactoringSupport
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.refactoring.ParadoxScriptRefactoringSupportProvider"/>
    <renameInputValidator
        implementation="com.windea.plugin.idea.pls.script.refactoring.ParadoxScriptVariableRenameInputValidator"/>
    <renameInputValidator
        implementation="com.windea.plugin.idea.pls.script.refactoring.ParadoxScriptPropertyRenameInputValidator"/>
    <refactoring.inlineHandler
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.refactoring.ParadoxScriptInlineHandler"/>
    <completion.contributor
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.codeInsight.ParadoxScriptCompletionContributor"/>
    <codeInsight.typeInfo 
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.codeInsight.ParadoxScriptExpressionTypeProvider"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.codeInsight.ParadoxDefinitionLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Script"
        implementationClass="com.windea.plugin.idea.pls.script.codeInsight.ParadoxDefinitionLocalisationLineMarkerProvider"/>
    <anchorReferenceProvider
        implementation="com.windea.plugin.idea.pls.core.reference.ParadoxPathReferenceProvider"/>
    
    <additionalTextAttributes scheme="Default" file="colorSchemes/ParadoxScriptDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/ParadoxScriptDarcula.xml"/>

    <localInspection
        language="Paradox Script"
        shortName="ParadoxScriptDuplicateVariableDefinitions" bundle="messages.PlsBundle"
        groupKey="paradox.script.inspection"
        key="paradox.script.inspection.duplicateVariableDefinitions"
        enabledByDefault="true" level="WARNING"
        implementationClass="com.windea.plugin.idea.pls.script.inspections.DuplicateVariableDefinitionsInspection"/>
    <localInspection
        language="Paradox Script"
        shortName="ParadoxScriptInvalidFileEncoding" bundle="messages.PlsBundle"
        groupKey="paradox.script.inspection"
        key="paradox.script.inspection.invalidFileEncoding"
        enabledByDefault="true" level="WARNING"
        implementationClass="com.windea.plugin.idea.pls.script.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->

    <!--region Paradox Localisation Language-->
    <fileType
        language="Paradox Localisation"
        name="Paradox Localisation File" fieldName="INSTANCE"
        implementationClass="com.windea.plugin.idea.pls.localisation.ParadoxLocalisationFileType"/>
    <lang.fileViewProviderFactory
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.psi.ParadoxLocalisationFileViewProviderFactory"/>
    <lang.parserDefinition
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.psi.ParadoxLocalisationParserDefinition"/>
    
    <stubElementTypeHolder 
        class="com.windea.plugin.idea.pls.localisation.psi.ParadoxLocalisationStubElementTypes"
        externalIdPrefix="paradoxLocalisation."/>
    <stubIndex implementation="com.windea.plugin.idea.pls.localisation.psi.ParadoxLocalisationNameIndex"/>
    
    <spellchecker.support
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.ParadoxLocalisationSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.highlighter.ParadoxLocalisationSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="com.windea.plugin.idea.pls.localisation.highlighter.ParadoxLocalisationColorSettingsPage"/>
    <lang.braceMatcher
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationBraceMatcher"/>
    <lang.commenter
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationCommenter"/>
    <liveTemplateContext
        implementation="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationTemplateContext"/>
    <defaultLiveTemplates file="/liveTemplates/ParadoxLocalisation.xml"/>
    <breadcrumbsInfoProvider
        implementation="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationBreadCrumbsProvider"/>
    <lang.quoteHandler
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationQuoteHandler"/>
    <lang.documentationProvider
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationDocumentationProvider"/>
    <elementDescriptionProvider
        implementation="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationDescriptionProvider"/>
    <lang.findUsagesProvider
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationFindUsagesProvider"/>
    <annotator
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.editor.ParadoxLocalisationAnnotator"/>
    <lang.psiStructureViewFactory
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.structureView.ParadoxLocalisationStructureViewFactory"/>
    <lang.formatter
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.formatter.ParadoxLocalisationFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.localisation.formatter.ParadoxLocalisationCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="com.windea.plugin.idea.pls.localisation.formatter.ParadoxLocalisationLanguageCodeStyleSettingsProvider"/>
    <lang.refactoringSupport
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.refactoring.ParadoxLocalisationRefactoringSupportProvider"/>
    <renameInputValidator
        implementation="com.windea.plugin.idea.pls.localisation.refactoring.ParadoxLocalisationPropertyRenameInputValidator"/>
    <completion.contributor
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.codeInsight.ParadoxLocalisationCompletionContributor"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Localisation"
        implementationClass="com.windea.plugin.idea.pls.localisation.codeInsight.ParadoxLocalisationLineMarkerProvider"/>

    <additionalTextAttributes scheme="Default" file="colorSchemes/ParadoxLocalisationDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/ParadoxLocalisationDarcula.xml"/>

    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.ChangeLocaleIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.ChangeColorIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.ChangeSequentialNumberIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.CopyRawTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.CopyPlainTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.pls.localisation.intentions.CopyRichTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    
    <localInspection
        language="Paradox Localisation"
        shortName="ParadoxLocalisationDuplicatePropertyKeys"
        groupKey="paradox.localisation.inspection" key="paradox.localisation.inspection.duplicatePropertyKeys"
        enabledByDefault="true" level="WARNING"
        implementationClass="com.windea.plugin.idea.pls.localisation.inspections.DuplicatePropertyKeysInspection"/>
    <localInspection
        language="Paradox Localisation"
        shortName="ParadoxLocalisationInvalidFileEncoding"
        groupKey="paradox.localisation.inspection" key="paradox.localisation.inspection.invalidFileEncoding"
        enabledByDefault="true" level="WARNING"
        implementationClass="com.windea.plugin.idea.pls.localisation.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->
  </extensions>
</idea-plugin>
