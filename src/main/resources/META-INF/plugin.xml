<idea-plugin>
  <id>icu.windea.pls</id>
  <name>Paradox Language Support</name>
  <category>Languages</category>

  <vendor email="dk_breeze@qq.com" url="https://github.com/DragonKnightOfBreeze">DragonKnightOfBreeze</vendor>

  <depends>com.intellij.modules.lang</depends>

  <description><![CDATA[
    <p>
      <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/README.md">中文文档</a> | <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/README_en.md">English Documentation</a>
    </p>
    <p>
      <a href="https://windea.icu/Paradox-Language-Support/#/zh/">中文参考文档</a> | <a href="https://windea.icu/Paradox-Language-Support/#/en/">English Reference Documentation</a>
    </p>
    <p>
      <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support">Github</a>
    </p>
    
    <hr/>
    
    <p>
      Support for Paradox Language.
    </p>
    <p>
      This plugin is under developing, some complex functions may not be implemented yet, and may cause unexpected bugs.
    </p>
    <p>
      If you want more perfect language support, please consider using <a href="https://code.visualstudio.com">VSCode</a> with <a href="https://github.com/cwtools/cwtools-vscode">CWTools</a> plugin.
    </p>
    <p>
      Create the descriptor file <code>descriptor.mod</code> in the root directory of your Mod to provide language support.
    </p>
    <p>
      Create the mark file <code>.${gameType}</code> in the root directory of your Mod to specify game type. (e.g. <code>.stellaris</code>)
    </p>
    <p>
      Supported game types: ck2 / ck3 / eu4 / hoi4 / ir / stellaris / vic2.
    </p>
    <p>
      Supported paradox games: Crusader Kings II / Crusader Kings III / Europa Universalis IV / Hearts of Iron IV / Imperator: Rome / Stellaris / Victoria II.
    </p>
    <p>
      If you want to add game directory and third party mod as dependencies, just add them as libraries to the project module of your mod, like what Java and Kotlin does.
    </p>
    <p>
      This plugin shares rule files (<code>*.cwt</code>) with <a href="https://github.com/cwtools/cwtools-vscode">CWTools</a>, but related functions has not been fully implemented yet.
    </p>
    <p>
      If you have met IDE exceptions about indices, please try to rebuild indices. (Click <code>File -> Invalidate Caches... -> Invalidate and Restart</code>)
    </p>
    <p>
      If you have found any bugs or problems, feel free to report them in project's <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/issues">Github Issue Page</a>.
    </p>
    <p>
      Welcome to have a look at <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support">this project</a> and <a href="https://github.com/DragonKnightOfBreeze?tab=repositories">my other projects</a>.
    </p>

    <hr/>

    <p>
      Paradox语言支持。
    </p>
    <p>
      这个插件正在开发中，部分比较复杂的功能可能尚未实现，并且可能会发生意外的BUG。
    </p>
    <p>
      如果需要更加完善的语言支持，请考虑使用<a href="https://code.visualstudio.com">VSCode</a>以及<a href="https://github.com/cwtools/cwtools-vscode">CWTools</a>插件。
    </p>
    <p>
      在你的模组根文件夹下创建描述符文件<code>descriptor.mod</code>，即可提供语言支持。
    </p>
    <p>
      在你的模组根文件夹下创建标记文件<code>.${gameType}</code>，即可指定游戏类型。（如<code>.stellaris</code>）
    </p>
    <p>
      支持的游戏类型：ck2 / ck3 / eu4 / hoi4 / ir / stellaris / vic2。
    </p>
    <p>
      支持的P社游戏：Crusader Kings II（十字军之王 II） / Crusader Kings III（十字军之王 III） / Europa Universalis IV（欧陆风云 IV） / Hearts of Iron IV（钢铁雄心 IV） / Imperator: Rome（帝国：罗马） / Stellaris（群星） / Victoria II（维多利亚 II）。
    </p>
    <p>
      如果需要添加游戏目录以及第三方模组作为依赖，如同Java和Kotlin一样，将它们作为库添加到你的模组对应的项目模块即可。
    </p>
    <p>
      这个插件与<a href="https://github.com/cwtools/cwtools-vscode">CWTools</a>共享规则文件（<code>*.cwt</code>），但是相关功能尚未完全实现。
    </p>
    <p>
      如果遇到索引相关的IDE报错，请尝试重新构建索引。 （点击<code>File -> Invalidate Caches... -> Invalidate and Restart</code>）
    </p>
    <p>
      如果遇到BUG或问题，欢迎在项目的<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/issues">Github Issue页面</a>提出。
    </p>
    <p>
      欢迎查看<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support">本项目</a>和<a href="https://github.com/DragonKnightOfBreeze?tab=repositories">我的其他项目</a>。
    </p>
    ]]></description>

  <change-notes><![CDATA[
    <p>
      Please see the <a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/CHANGELOG.md">CHANGELOG</a> written by Simple Chinese.
    </p>

    <br>

    <p>
      请查看<a href="https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/CHANGELOG.md">CHANGELOG</a>。
    </p>
    ]]></change-notes>

  <resource-bundle>messages.PlsBundle</resource-bundle>

  <extensions defaultExtensionNs="com.intellij">
    <!--region Core-->
    <renameHandler implementation="icu.windea.pls.core.refactoring.PsiCheckRenameHandler"/>
    
    <!--suppress PluginXmlValidity -->
    <projectService serviceImplementation="icu.windea.pls.config.CwtConfigGroupProvider" preload="true" order="first"/>
   <!--suppress PluginXmlValidity -->
    <fileTypeOverrider implementation="icu.windea.pls.core.ParadoxFileTypeOverrider"/>

    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$Ck2LibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$Ck3LibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$Eu4LibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$Hoi4LibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$IrLibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$StellarisLibraryType"/>
    <library.type implementation="icu.windea.pls.core.library.ParadoxLibraryType$Vic2LibraryType"/>

    <applicationConfigurable
        id="settings.language.pls"
        groupId="language"
        instance="icu.windea.pls.core.settings.ParadoxSettingsConfigurable"/>
    <applicationService
        serviceImplementation="icu.windea.pls.core.settings.ParadoxSettingsState"/>
    <!--endregion-->

    <!--region Cwt Language-->
    <fileType
      language="Cwt Config"
      name="Cwt Config File" fieldName="INSTANCE"
      implementationClass="icu.windea.pls.cwt.CwtFileType"
      extensions="cwt"/>
    <lang.parserDefinition
      language="Cwt Config"
      implementationClass="icu.windea.pls.cwt.psi.CwtParseDefinition"/>

    <spellchecker.support
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.CwtSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.highlighter.CwtSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="icu.windea.pls.cwt.highlighter.CwtColorSettingsPage"/>
    <lang.braceMatcher
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.editor.CwtBraceMatcher"/>
    <lang.foldingBuilder
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.editor.CwtFoldingBuilder"/>
    <lang.quoteHandler
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.editor.CwtQuoteHandler"/>
    <lang.commenter
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.editor.CwtCommenter"/>
    <lang.psiStructureViewFactory
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.structureView.CwtStructureViewFactory"/>
    <lang.formatter
        language="Cwt Config"
        implementationClass="icu.windea.pls.cwt.formatter.CwtFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="icu.windea.pls.cwt.formatter.CwtCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="icu.windea.pls.cwt.formatter.CwtLanguageCodeStyleSettingsProvider"/>
    <!--endregion-->
    
    
    <!--region Paradox Script Language-->
    <fileType
        language="Paradox Script"
        name="Paradox Script File" fieldName="INSTANCE"
        implementationClass="icu.windea.pls.script.ParadoxScriptFileType"/>
    <lang.fileViewProviderFactory
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.psi.ParadoxScriptFileViewProviderFactory"/>
    <lang.parserDefinition
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.psi.ParadoxScriptParserDefinition"/>
    
    <stubElementTypeHolder
        class="icu.windea.pls.script.psi.ParadoxScriptStubElementTypes"
        externalIdPrefix="paradoxScript."/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxScriptVariableNameIndex"/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxDefinitionNameIndex"/>
    <stubIndex implementation="icu.windea.pls.script.psi.ParadoxDefinitionTypeIndex"/>
    
    <spellchecker.support
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.ParadoxScriptSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.highlighter.ParadoxScriptSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="icu.windea.pls.script.highlighter.ParadoxScriptColorSettingsPage"/>
    <lang.braceMatcher
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptBraceMatcher"/>
    <lang.foldingBuilder
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptFoldingBuilder"/>
    <lang.commenter
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptCommenter"/>
    <breadcrumbsInfoProvider
        implementation="icu.windea.pls.script.editor.ParadoxScriptBreadCrumbsProvider"/>
    <colorProvider
        implementation="icu.windea.pls.script.editor.ParadoxScriptColorProvider"/>
    <lang.quoteHandler
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptQuoteHandler"/>
    <lang.documentationProvider
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptDocumentationProvider"/>
    <elementDescriptionProvider
        implementation="icu.windea.pls.script.editor.ParadoxScriptDescriptionProvider"/>
    <lang.findUsagesProvider
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptFindUsagesProvider"/>
    <annotator
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.editor.ParadoxScriptAnnotator"/>
    <codeInsight.inlayProvider
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.codeInsight.hints.ParadoxScriptDefinitionHintsProvider"/>
    <lang.psiStructureViewFactory
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.structureView.ParadoxScriptStructureViewFactory"/>
    <lang.formatter
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.formatter.ParadoxScriptFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="icu.windea.pls.script.formatter.ParadoxScriptCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="icu.windea.pls.script.formatter.ParadoxScriptLanguageCodeStyleSettingsProvider"/>
    <lang.refactoringSupport
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptRefactoringSupportProvider"/>
    <renameInputValidator
        implementation="icu.windea.pls.script.refactoring.ParadoxScriptVariableRenameInputValidator"/>
    <renameInputValidator
        implementation="icu.windea.pls.script.refactoring.ParadoxScriptPropertyRenameInputValidator"/>
    <refactoring.inlineHandler
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.refactoring.ParadoxScriptInlineHandler"/>
    <completion.contributor
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxScriptCompletionContributor"/>
    <codeInsight.typeInfo 
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxScriptExpressionTypeProvider"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxDefinitionLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Script"
        implementationClass="icu.windea.pls.script.codeInsight.ParadoxDefinitionLocalisationLineMarkerProvider"/>
    <anchorReferenceProvider
        implementation="icu.windea.pls.core.reference.ParadoxPathReferenceProvider"/>
    
    <additionalTextAttributes scheme="Default" file="colorSchemes/ParadoxScriptDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/ParadoxScriptDarcula.xml"/>

    <localInspection
        language="Paradox Script"
        shortName="ParadoxScriptDuplicateVariableDefinitions" bundle="messages.PlsBundle"
        groupKey="paradox.script.inspection"
        key="paradox.script.inspection.duplicateVariableDefinitions"
        enabledByDefault="true" level="WARNING"
        implementationClass="icu.windea.pls.script.inspections.DuplicateVariableDefinitionsInspection"/>
    <localInspection
        language="Paradox Script"
        shortName="ParadoxScriptInvalidFileEncoding" bundle="messages.PlsBundle"
        groupKey="paradox.script.inspection"
        key="paradox.script.inspection.invalidFileEncoding"
        enabledByDefault="true" level="WARNING"
        implementationClass="icu.windea.pls.script.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->

    <!--region Paradox Localisation Language-->
    <fileType
        language="Paradox Localisation"
        name="Paradox Localisation File" fieldName="INSTANCE"
        implementationClass="icu.windea.pls.localisation.ParadoxLocalisationFileType"/>
    <lang.fileViewProviderFactory
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.psi.ParadoxLocalisationFileViewProviderFactory"/>
    <lang.parserDefinition
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.psi.ParadoxLocalisationParserDefinition"/>
    
    <stubElementTypeHolder 
        class="icu.windea.pls.localisation.psi.ParadoxLocalisationStubElementTypes"
        externalIdPrefix="paradoxLocalisation."/>
    <stubIndex implementation="icu.windea.pls.localisation.psi.ParadoxLocalisationNameIndex"/>
    
    <spellchecker.support
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.ParadoxLocalisationSpellchecker"/>
    <lang.syntaxHighlighterFactory
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.highlighter.ParadoxLocalisationSyntaxHighlighterFactory"/>
    <colorSettingsPage
        implementation="icu.windea.pls.localisation.highlighter.ParadoxLocalisationColorSettingsPage"/>
    <lang.braceMatcher
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationBraceMatcher"/>
    <lang.commenter
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationCommenter"/>
    <liveTemplateContext
        implementation="icu.windea.pls.localisation.editor.ParadoxLocalisationTemplateContext"/>
    <defaultLiveTemplates file="/liveTemplates/ParadoxLocalisation.xml"/>
    <breadcrumbsInfoProvider
        implementation="icu.windea.pls.localisation.editor.ParadoxLocalisationBreadCrumbsProvider"/>
    <lang.quoteHandler
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationQuoteHandler"/>
    <lang.documentationProvider
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationDocumentationProvider"/>
    <elementDescriptionProvider
        implementation="icu.windea.pls.localisation.editor.ParadoxLocalisationDescriptionProvider"/>
    <lang.findUsagesProvider
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationFindUsagesProvider"/>
    <annotator
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.editor.ParadoxLocalisationAnnotator"/>
    <lang.psiStructureViewFactory
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.structureView.ParadoxLocalisationStructureViewFactory"/>
    <lang.formatter
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.formatter.ParadoxLocalisationFormattingModelBuilder"/>
    <codeStyleSettingsProvider
        implementation="icu.windea.pls.localisation.formatter.ParadoxLocalisationCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
        implementation="icu.windea.pls.localisation.formatter.ParadoxLocalisationLanguageCodeStyleSettingsProvider"/>
    <lang.refactoringSupport
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.refactoring.ParadoxLocalisationRefactoringSupportProvider"/>
    <renameInputValidator
        implementation="icu.windea.pls.localisation.refactoring.ParadoxLocalisationPropertyRenameInputValidator"/>
    <completion.contributor
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.codeInsight.ParadoxLocalisationCompletionContributor"/>
    <codeInsight.lineMarkerProvider
        language="Paradox Localisation"
        implementationClass="icu.windea.pls.localisation.codeInsight.ParadoxLocalisationLineMarkerProvider"/>

    <additionalTextAttributes scheme="Default" file="colorSchemes/ParadoxLocalisationDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/ParadoxLocalisationDarcula.xml"/>

    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.ChangeLocaleIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.ChangeColorIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.ChangeSequentialNumberIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.CopyRawTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.CopyPlainTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    <intentionAction>
      <className>icu.windea.pls.localisation.intentions.CopyRichTextIntention</className>
      <category>Paradox localisation</category>
    </intentionAction>
    
    <localInspection
        language="Paradox Localisation"
        shortName="ParadoxLocalisationDuplicatePropertyKeys"
        groupKey="paradox.localisation.inspection" key="paradox.localisation.inspection.duplicatePropertyKeys"
        enabledByDefault="true" level="WARNING"
        implementationClass="icu.windea.pls.localisation.inspections.DuplicatePropertyKeysInspection"/>
    <localInspection
        language="Paradox Localisation"
        shortName="ParadoxLocalisationInvalidFileEncoding"
        groupKey="paradox.localisation.inspection" key="paradox.localisation.inspection.invalidFileEncoding"
        enabledByDefault="true" level="WARNING"
        implementationClass="icu.windea.pls.localisation.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->
  </extensions>
</idea-plugin>
