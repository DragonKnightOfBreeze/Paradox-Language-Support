## 性能优化笔记

以下代码检查可能非常慢，需要考虑优化：

```
icu.windea.pls.script.inspections.general.UnusedParameterInspection
icu.windea.pls.script.inspections.general.UnusedValueSetValueInspection
icu.windea.pls.script.inspections.general.UnsetValueSetValueInspection
icu.windea.pls.script.inspections.bug.UnsupportedRecursionInspection
icu.windea.pls.localisation.inspections.bug.UnsupportedRecursionInspection
```

以下关键代码需要进一步优化性能：

* `icu.windea.pls.lang.model.ParadoxDefinitionInfo.resolvePrimaryLocalisation` - 以及类似方法
* `icu.windea.pls.lang.parameter.ParadoxLocalisationParameterSupport$INSTANCE.resolveParameter(ParadoxLocalisationPropertyReference)`
  * `com.intellij.psi.search.searches.ReferencesSearch.search(com.intellij.psi.PsiElement, com.intellij.psi.search.SearchScope)` - 使用引用查询时无法避免，后续考虑通过使用其他方案优化
* `icu.windea.pls.script.inspections.general.UnusedParameterInspection`
  * `com.intellij.psi.search.searches.ReferencesSearch.search(com.intellij.psi.PsiElement, com.intellij.psi.search.SearchScope)` - 使用引用查询时无法避免，后续考虑通过使用其他方案优化
* `icu.windea.pls.lang.scope.ParadoxDefinitionInferredScopeContextProvider.INSTANCE.getScopeContext`
* `icu.windea.pls.lang.ParadoxDefinitionMemberHandler.getInfo`
* `icu.windea.pls.lang.ParadoxConfigResolver.getConfigs`
  * `icu.windea.pls.lang.ParadoxConfigResolver.getPropertyConfigs(PsiElement, boolean, boolean, int)` - 64.9%
    * `icu.windea.pls.lang.ParadoxConfigResolver.doGetPropertyConfigs(PsiElement, boolean, boolean, int)` - 59.5%
      * `icu.windea.pls.PlsExtensionsKt.getDefinitionMemberInfo(ParadoxScriptMemberElement)` - 22.4%
        * `icu.windea.pls.lang.ParadoxDefinitionHandler.isDefinition(ParadoxScriptDefinitionElement)` - 10% *
          * `icu.windea.pls.lang.ParadoxDefinitionHandler.doGetInfo(ParadoxScriptDefinitionElement, PsiFile)` - 8.7%
            * `icu.windea.pls.lang.model.ParadoxElementPath.Resolver.resolve(java.util.List<java.lang.String>)` - 考虑不使用缓存 ✔
        * `icu.windea.pls.lang.inline.ParadoxScriptMemberElementInlineSupport$INSTANCE.linkElement(ParadoxScriptMemberElement)` - 8% *
          * `com.intellij.psi.search.FileTypeIndex.processFiles(FileType, Processor, GlobalSearchScope)` - 7.5%
            * `icu.windea.pls.core.IntellijExtensionsKt.toPsiFile()` - 4.1% - 为避免出现意外情况，这里必须确定fileType *
              * `icu.windea.pls.core.ParadoxFileTypeOverrider.getOverriddenFileType(VirtualFile)` - 2.2%
                * `icu.windea.pls.lang.ParadoxCoreHandler.resolveFileInfo(VirtualFile, String)` - 1.9%
            * `icu.windea.pls.core.index.ParadoxInlineScriptIndex$Companion.getData(String, VirtualFile, Project)`
            * `com.intellij.psi.impl.source.PsiFileImpl.findElementAt(int)` *
      * `icu.windea.pls.lang.model.ParadoxDefinitionMemberInfo.getConfigs(int)` - 18.5%
        * `icu.windea.pls.lang.ParadoxConfigInlineHandler.inlineFromAliasConfig(ParadoxScriptMemberElement, String, boolean, CwtPropertyConfig, List, int)` - 8.6%
          * `icu.windea.pls.lang.ParadoxConfigInlineHandler.inlineWithAliasConfig(CwtPropertyConfig, CwtAliasConfig)` 6.6% - CwtPropertyConfig.getValueConfig应当懒加载 ✔
        * `icu.windea.pls.lang.ParadoxConfigMatcher.matches(PsiElement, ParadoxDataExpression, CwtDataExpression, CwtConfig, CwtConfigGroup, int)` - 4.0%
          * `icu.windea.pls.lang.ParadoxConfigHandler.getAliasSubName(PsiElement, String, boolean, String, CwtConfigGroup, int)` 2.2%
      * `icu.windea.pls.lang.ParadoxConfigResolver.doGetFinalResultValues(List, List, int)` - 13.4%
        * `icu.windea.pls.lang.ParadoxConfigMatcher$Result$LazyIndexAwareMatch$result$2.invoke()` - 13.1%
          * `icu.windea.pls.lang.ParadoxConfigMatcher$getComplexEnumValueMatchResult$1.invoke()` - 7.0%
            * `icu.windea.pls.core.index.ParadoxComplexEnumValueIndex.getData(VirtualFile, Project)` - 4.6%
          * `icu.windea.pls.lang.ParadoxConfigMatcher$getDefinitionMatchResult$1.invoke()` - 4.6%
            * `icu.windea.pls.core.search.ParadoxDefinitionSearcher.matchesSubtypes(ParadoxScriptDefinitionElement, List)` - 3.2%
              * `icu.windea.pls.lang.ParadoxDefinitionHandler.doMatchDefinition(ParadoxScriptDefinitionElement, CwtPropertyConfig, CwtConfigGroup, int)` - 3.2%
                * `icu.windea.pls.script.psi.impl.ParadoxScriptPropertyImpl.getBlock()` - 3.1% *
          * `icu.windea.pls.lang.ParadoxConfigMatcher$getLocalisationMatchResult$1.invoke()` - 1.4%