## 性能优化笔记

以下代码检查可能非常慢，需要考虑优化：

```
icu.windea.pls.script.inspections.general.UnusedParameterInspection
icu.windea.pls.script.inspections.general.UnusedValueSetValueInspection
icu.windea.pls.script.inspections.general.UnsetValueSetValueInspection
icu.windea.pls.script.inspections.bug.UnsupportedRecursionInspection
icu.windea.pls.localisation.inspections.bug.UnsupportedRecursionInspection
```

以下代码检查可能需要进一步优化性能：

```
icu.windea.pls.lang.ParadoxConfigHandler.getConfigs
# 调用频繁

icu.windea.pls.lang.ParadoxConfigHandler.matchesScriptExpression
# 调用频繁
# 主要是里面的索引查询导致
✔

icu.windea.pls.lang.model.ParadoxDefinitionInfo.resolvePrimaryLocalisation
# 以及类似的方法
# 需要缓存
✔

icu.windea.pls.PlsExtensionsKt.selectLocale
# 需要加上索引
✔

icu.windea.pls.lang.parameter.ParadoxLocalisationParameterSupport.INSTANCE.resolveParameter
# 尝试缓存，但是需要基于上下文
TODO

icu.windea.pls.lang.scope.ParadoxDefinitionInferredScopeContextProvider.INSTANCE.getScopeContext
# 尝试访问缓存数据，不要使用ReferencesSearch
✔

icu.windea.pls.core.index.ParadoxValueSetValueIndex.getData
✔

icu.windea.pls.config.expression.CwtLocalisationLocationExpression.resolve
# 难以避免

icu.windea.pls.localisation.inspections.bug.UnsupportedRecursionInspection
# 主要是解析localisationParameter太慢导致

icu.windea.pls.lang.scope.impl.ParadoxEventFromEventInferredScopeContextProvider
icu.windea.pls.core.index.hierarchy.ParadoxEventHierarchyIndex.getData
icu.windea.pls.lang.ParadoxConfigHandler.getConfigs
# 加了索引之后还是非常慢

icu.windea.pls.lang.ParadoxDefinitionHandler.doGetInfo
icu.windea.pls.lang.ParadoxDefinitionHandler.matchesType
icu.windea.pls.core.StdlibExtensionsKt.matchesPath
# 看起来有点问题？
✔

icu.windea.pls.lang.ParadoxDefinitionHandler.doMatchDefinition
icu.windea.pls.script.psi.ParadoxScriptDefinitionElement.getBlock
第一次获取PSI，应当优化不了

icu.windea.pls.core.search.ParadoxFilePathSearch.Companion.search
icu.windea.pls.lang.expression.impl.ParadoxFilePathReferenceExpressionSupport.extract
需要优化

icu.windea.pls.lang.ParadoxConfigHandler.getConfigs

icu.windea.pls.lang.ParadoxDefinitionMemberHandler.getInfo

icu.windea.pls.core.search.ParadoxInlineScriptSearcher

ParadoxElementPath
ParadoxPath
# 不再使用缓存？
```
